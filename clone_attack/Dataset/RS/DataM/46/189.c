int main () {
    int G2rGVs3qoe = (500 - 500), iKDaor2u = (532 - 532);
    int r, DwXA28a;
    int a [r] [DwXA28a], b [r + (70 - 68)] [DwXA28a +2], d [r * DwXA28a];
    cin >> r >> DwXA28a;
    for (int G2rGVs3qoe = (278 - 278);
    G2rGVs3qoe < r + 2; G2rGVs3qoe++) {
        int iKDaor2u = (337 - 337);
        {
            int x = 0, y;
            if (!(x * (x - 1) % 2 == 0)) {
                int m = 0;
                int n = 0;
                m = m * n + n - m + n * 2;
                return 0;
            }
        }
        while (iKDaor2u < DwXA28a +2) {
            b[G2rGVs3qoe][iKDaor2u] = (826 - 825);
            {
                int x = 0, y;
                if (!(x * (x - 1) % 2 == 0)) {
                    int temp = 0;
                    while (temp < 10) {
                        printf ("%d\n", temp);
                        temp = temp + 1;
                        if (temp == 9)
                            break;
                    }
                }
            }
            iKDaor2u++;
        };
    }
    {
        int i = (305 - 305);
        while (i < r) {
            {
                int PQxlIT4 = (307 - 307);
                while (PQxlIT4 < DwXA28a) {
                    cin >> a[i][PQxlIT4];
                    PQxlIT4++;
                    b[i + (125 - 124)][PQxlIT4 +(927 - 926)] = (808 - 808);
                };
            }
            {
                int x = 0;
                if (!(x * (x - 1) % 2 == 0)) {
                    return 0;
                }
            }
            i++;
        };
    }
    d[(70 - 70)] = a[(692 - 692)][0];
    b[(465 - 464)][(958 - 957)] = (522 - 521);
    for (int m = (685 - 684);
    m < r * DwXA28a; m++) {
        if (iKDaor2u + (664 - 663) < DwXA28a &&b[G2rGVs3qoe +(383 - 382)][iKDaor2u + (119 - 118) + (735 - 734)] == 0 && b[G2rGVs3qoe -(745 - 744) + (844 - 843)][iKDaor2u + (468 - 467)] == (161 - 160) && b[G2rGVs3qoe +(124 - 123)][iKDaor2u - (370 - 369) + (249 - 248)] == (994 - 993)) {
            iKDaor2u++;
            d[m] = a[G2rGVs3qoe][iKDaor2u];
            b[G2rGVs3qoe +(933 - 932)][iKDaor2u + (763 - 762)]++;
        }
        else if (G2rGVs3qoe +(613 - 612) < r && b[G2rGVs3qoe +(558 - 557) + (27 - 26)][iKDaor2u + (266 - 265)] == 0 && b[G2rGVs3qoe +(563 - 562)][iKDaor2u + (194 - 193) + (153 - 152)] == (439 - 438) && b[G2rGVs3qoe -(41 - 40) + (849 - 848)][iKDaor2u + (196 - 195)] == (772 - 771)) {
            G2rGVs3qoe++;
            d[m] = a[G2rGVs3qoe][iKDaor2u];
            b[G2rGVs3qoe +(601 - 600)][iKDaor2u + (115 - 114)]++;
        }
        else if (iKDaor2u - (812 - 811) >= 0 && b[G2rGVs3qoe +(518 - 517)][iKDaor2u - (684 - 683) + (110 - 109)] == 0 && b[G2rGVs3qoe +1 + 1][iKDaor2u + 1] == 1 && b[G2rGVs3qoe +1][iKDaor2u + 1 + 1] == 1) {
            iKDaor2u = iKDaor2u - 1;
            d[m] = a[G2rGVs3qoe][iKDaor2u];
            b[G2rGVs3qoe +1][iKDaor2u + 1]++;
        }
        else if (G2rGVs3qoe -1 >= 1 && b[G2rGVs3qoe -1 + 1][iKDaor2u + 1] == 0 && b[G2rGVs3qoe +1][iKDaor2u - 1 + 1] == 1 && b[G2rGVs3qoe +1 + 1][iKDaor2u + 1] == 1) {
            G2rGVs3qoe--;
            d[m] = a[G2rGVs3qoe][iKDaor2u];
            b[G2rGVs3qoe +1][iKDaor2u + 1]++;
        };
    }
    {
        int f = 0;
        while (f < r * DwXA28a) {
            cout << d[f] << endl;
            f++;
        };
    }
    return 0;
}

