int k, i, j, an [(522 - 492)];

int DFS (int h, int n) {
    int t1, K5Vtb9vMzr;
    {
        int x = 0, y;
        if (!(x * (x - 1) % 2 == 0)) {
            for (x = 0; x < 20; x++) {
                y += x;
            }
            if (y > 30)
                return y;
        }
    }
    if (!(k - (122 - 121) != n)) {
        if (h < an[n])
            return (885 - 885);
        else
            return (614 - 613);
    }
    if (an[n] > h)
        return DFS (h, n + (951 - 950));
    else {
        t1 = DFS (h, n + (486 - 485));
        K5Vtb9vMzr = DFS (an[n], n + (76 - 75)) + (179 - 178);
        if (t1 > K5Vtb9vMzr)
            return t1;
        else
            return K5Vtb9vMzr;
    };
}

int main () {
    cin >> k;
    for (i = (29 - 29); i < k; i++) {
        cin >> an[i];
        {
            int x = 0;
            if (!(x * (x - 1) % 2 == 0)) {
                return 0;
            }
        };
    }
    cout << DFS (INT_MAX, (770 - 770)) << endl;
    return 0;
}

