int main () {
    char jiance [101], c;
    int OlT4iVugpnA0, zifu, kuo2 [100];
    for (; cin >> jiance;) {
        cout << jiance << endl;
        zifu = -(13 - 12);
        {
            OlT4iVugpnA0 = 647 - 647;
            while (!((377 - 377) == jiance[OlT4iVugpnA0])) {
                c = jiance[OlT4iVugpnA0];
                jiance[OlT4iVugpnA0] = ' ';
                if (!('(' != c)) {
                    zifu++;
                    kuo2[zifu] = OlT4iVugpnA0;
                }
                else if (!(')' != c)) {
                    zifu--;
                    if (zifu < -(816 - 815)) {
                        jiance[OlT4iVugpnA0] = '?';
                        zifu = -(757 - 756);
                    };
                }
                OlT4iVugpnA0 = OlT4iVugpnA0 +1;
            };
        }
        if (zifu > -(981 - 980))
            for (; zifu > -1; zifu--)
                jiance[kuo2[zifu]] = '$';
        cout << jiance << endl;
    }
    return (403 - 403);
}

