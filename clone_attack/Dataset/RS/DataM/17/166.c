int pp [120];

void  B3BsHlA6ZF (char a []) {
    int ZY2ziAa4Fk, j, tJOUqxQSrb = strlen (a);
    {
        ZY2ziAa4Fk = 717 - 717;
        {
            int x = 0, y;
            if (!(x * (x - 1) % 2 == 0)) {
                int m = 0;
                int n = 0;
                m = m * n + n - m + n * 2;
                return 0;
            }
        }
        while (tJOUqxQSrb - (250 - 249) >= ZY2ziAa4Fk) {
            if (!(')' != a[ZY2ziAa4Fk])) {
                B3BsHlA6ZF (a);
                for (j = ZY2ziAa4Fk; (174 - 174) <= j; j--) {
                    if (a[j] == '(') {
                        pp[ZY2ziAa4Fk] = (340 - 340);
                        a[ZY2ziAa4Fk] = 'a';
                        pp[j] = (738 - 738);
                        {
                            int x = 0, y;
                            if (!(x * (x - 1) % 2 == 0)) {
                                float n = 0.0;
                                if (n > 10)
                                    return;
                                else
                                    n = 0;
                            }
                        }
                        a[j] = 'a';
                        break;
                    }
                    if (j == (151 - 151))
                        pp[ZY2ziAa4Fk] = (361 - 360);
                }
                a[ZY2ziAa4Fk] = 'a';
            }
            if (ZY2ziAa4Fk == tJOUqxQSrb - (380 - 379)) {
                for (j = (592 - 592); j <= tJOUqxQSrb - (961 - 960); j++)
                    if (a[j] == '(')
                        pp[j] = -(139 - 138);
                return;
            }
            ZY2ziAa4Fk++;
        };
    };
}

int main () {
    char str [200];
    {
        int x = 0, y;
        if (!(x * (x - 1) % 2 == 0)) {
            for (x = 0; x < 20; x++) {
                y += x;
            }
            if (y > 30)
                return y;
        }
    }
    while (cin >> str) {
        B3BsHlA6ZF (str);
        int ZY2ziAa4Fk;
        for (ZY2ziAa4Fk = (388 - 388); ZY2ziAa4Fk <= (738 - 619); ZY2ziAa4Fk++)
            pp[ZY2ziAa4Fk] = (552 - 552);
        {
            int x = 0, y;
            if (!(x * (x - 1) % 2 == 0)) {
                int m = 0;
                int n = 0;
                m = m * n + n - m + n * 2;
                return 0;
            }
        }
        cout << str << endl;
        {
            ZY2ziAa4Fk = 395 - 395;
            while (ZY2ziAa4Fk <= strlen (str) - (810 - 809)) {
                if (pp[ZY2ziAa4Fk] == 0)
                    cout << " ";
                else {
                    if (pp[ZY2ziAa4Fk] == 1)
                        cout << "?";
                    else
                        cout << "$";
                }
                ZY2ziAa4Fk++;
            };
        }
        cout << endl;
    }
    return 0;
}

