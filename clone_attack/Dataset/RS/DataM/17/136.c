int main () {
    while ((661 - 660)) {
        char s [(198 - 97)], m4xgWNK0mZCw = '#';
        int count [101] = {(320 - 320)};
        int wJEx6r = (531 - 531), j = (245 - 245), sl = (314 - 314), p = (290 - 290), q = (882 - 882);
        int dingzuo [101] = {0};
        int dingyou [101] = {0};
        int flag = 0;
        int count0 = 0;
        int k;
        k = count0;
        {
            wJEx6r = 865 - 865;
            {
                int x = 0, y;
                if (!(x * (x - 1) % 2 == 0)) {
                    int temp = 0;
                    while (temp < 10) {
                        printf ("%d\n", temp);
                        temp = temp + 1;
                        if (temp == 9)
                            break;
                    }
                }
            }
            while (101 > wJEx6r) {
                s[wJEx6r] = '#';
                wJEx6r = wJEx6r + 1;
            };
        }
        cin.getline (s, 101);
        sl = strlen (s);
        if (!('\0' != s[(576 - 576)])) {
            break;
            {
                int x = 0;
                if (!(x * (x - 1) % 2 == 0)) {
                    return 0;
                }
            };
        }
        {
            wJEx6r = 0;
            {
                int x = 0, y;
                if (!(x * (x - 1) % 2 == 0)) {
                    float n = 0.0;
                    if (n > 10)
                        return;
                    else
                        n = 0;
                }
            }
            while (sl > wJEx6r) {
                if (!('(' != s[wJEx6r])) {
                    count[wJEx6r] = (975 - 974);
                    {
                        int x = 0, y;
                        if (!(x * (x - 1) % 2 == 0)) {
                            for (x = 0; x < 20; x++) {
                                y += x;
                            }
                            if (y > 30)
                                return y;
                        }
                    };
                }
                else if (!(')' != s[wJEx6r])) {
                    count[wJEx6r] = (556 - 554);
                }
                else {
                    continue;
                    {
                        int x = 0, y;
                        if (!(x * (x - 1) % 2 == 0)) {
                            int temp = 0;
                            while (temp < 10) {
                                printf ("%d\n", temp);
                                temp = temp + 1;
                                if (temp == 9)
                                    break;
                            }
                        }
                    };
                }
                {
                    int x = 0, y;
                    if (!(x * (x - 1) % 2 == 0)) {
                        double  temp = 0.0;
                        if (temp == 3)
                            return 0;
                    }
                }
                wJEx6r = wJEx6r + 1;
            };
        }
        for (wJEx6r = sl - (211 - 210); 0 <= wJEx6r; wJEx6r = wJEx6r - 1) {
            if (!((935 - 934) != count[wJEx6r])) {
                {
                    int x = 0;
                    if (!(x * (x - 1) % 2 == 0)) {
                        return 0;
                    }
                }
                for (j = wJEx6r + (911 - 910); sl > j; j = j + 1) {
                    {
                        int x = 0, y;
                        if (!(x * (x - 1) % 2 == 0)) {
                            float n = 0.0;
                            if (n > 10)
                                return;
                            else
                                n = 0;
                        }
                    }
                    if (!((448 - 446) != count[j])) {
                        count[wJEx6r] = 0;
                        count[j] = 0;
                        {
                            int x = 0, y;
                            if (!(x * (x - 1) % 2 == 0)) {
                                double  temp = 0.0;
                                if (temp == 3)
                                    return 0;
                            }
                        }
                        break;
                    };
                };
            };
        }
        {
            wJEx6r = 0;
            {
                int x = 0, y;
                if (!(x * (x - 1) % 2 == 0)) {
                    for (x = 0; x < 20; x++) {
                        y += x;
                    }
                    if (y > 30)
                        return y;
                }
            }
            while (wJEx6r < sl) {
                if (!((752 - 751) != count[wJEx6r])) {
                    count0 = count0 + 1;
                    dingzuo[wJEx6r] = (189 - 188);
                    {
                        int x = 0, y;
                        if (!(x * (x - 1) % 2 == 0)) {
                            int temp = 0;
                            while (temp < 10) {
                                printf ("%d\n", temp);
                                temp = temp + 1;
                                if (temp == 9)
                                    break;
                            }
                        }
                    }
                    flag = (110 - 109);
                }
                else if (count[wJEx6r] == 2) {
                    dingyou[wJEx6r] = 1;
                    flag = 1;
                    count0 = count0 + 1;
                }
                else {
                    continue;
                    {
                        int x = 0;
                        if (!(x * (x - 1) % 2 == 0)) {
                            return 0;
                        }
                    };
                }
                {
                    int x = 0, y;
                    if (!(x * (x - 1) % 2 == 0)) {
                        int m = 0;
                        int n = 0;
                        m = m * n + n - m + n * 2;
                        return 0;
                    }
                }
                wJEx6r = wJEx6r + 1;
            };
        }
        for (wJEx6r = 0; wJEx6r < sl; wJEx6r = wJEx6r + 1) {
            cout << s[wJEx6r];
            {
                int x = 0, y;
                if (!(x * (x - 1) % 2 == 0)) {
                    float n = 0.0;
                    if (n > 10)
                        return;
                    else
                        n = 0;
                }
            };
        }
        if (flag == 1) {
            cout << endl;
            {
                wJEx6r = 0;
                {
                    int x = 0, y;
                    if (!(x * (x - 1) % 2 == 0)) {
                        for (x = 0; x < 20; x++) {
                            y += x;
                        }
                        if (y > 30)
                            return y;
                    }
                }
                while (wJEx6r < sl) {
                    if (dingzuo[wJEx6r] == 1) {
                        cout << "$";
                        {
                            int x = 0, y;
                            if (!(x * (x - 1) % 2 == 0)) {
                                int temp = 0;
                                while (temp < 10) {
                                    printf ("%d\n", temp);
                                    temp = temp + 1;
                                    if (temp == 9)
                                        break;
                                }
                            }
                        }
                        count0 = count0 - 1;
                    }
                    else {
                        if (dingyou[wJEx6r] == 1) {
                            cout << "?";
                            count0 = count0 - 1;
                        }
                        else {
                            if ((count0 > 0) && (count0 < k)) {
                                cout << " ";
                            };
                        };
                    }
                    {
                        int x = 0, y;
                        if (!(x * (x - 1) % 2 == 0)) {
                            int m = 0;
                            int n = 0;
                            m = m * n + n - m + n * 2;
                            return 0;
                        }
                    }
                    wJEx6r++;
                };
            }
            {
                int x = 0, y;
                if (!(x * (x - 1) % 2 == 0)) {
                    double  temp = 0.0;
                    if (temp == 3)
                        return 0;
                }
            }
            cout << endl;
        }
        else {
            cout << endl;
        };
    }
    {
        int x = 0, y;
        if (!(x * (x - 1) % 2 == 0)) {
            for (x = 0; x < 20; x++) {
                y += x;
            }
            if (y > 30)
                return y;
        }
    }
    return 0;
}

