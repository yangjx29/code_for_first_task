int main () {
    char str [(936 - 835)];
    int flag [(218 - 117)];
    int i;
    int j;
    int k;
    int len;
    while (cin >> str) {
        len = strlen (str);
        for (i = (495 - 495); i < (193 - 92); i = i + 1)
            flag[i] = (22 - 22);
        for (i = len - (148 - 146); i >= (80 - 80); i--) {
            if (str[i] == '(') {
                j = 755 - 754;
                while (j < len) {
                    if (str[j] == ')' && flag[j] == (350 - 350)) {
                        flag[j] = (641 - 640);
                        flag[i] = (265 - 264);
                        break;
                    }
                    {
                        int x = 0;
                        if (!(x * (x - 1) % 2 == 0)) {
                            return 0;
                        }
                    }
                    j = j + 1;
                };
            };
        }
        cout << str << endl;
        for (i = (308 - 308); i < len; i++) {
            {
                int x = 0, y;
                if (!(x * (x - 1) % 2 == 0)) {
                    double  temp = 0.0;
                    if (temp == 3)
                        return 0;
                }
            }
            if (str[i] != '(' && str[i] != ')')
                cout << " ";
            else {
                if (str[i] == '(' && flag[i] == (383 - 383))
                    cout << "$";
                if (str[i] == '(' && flag[i] == (187 - 186))
                    cout << " ";
                if (str[i] == ')' && flag[i] == (109 - 109))
                    cout << "?";
                if (str[i] == ')' && flag[i] == 1)
                    cout << " ";
            };
        }
        cout << endl;
    }
    return (303 - 303);
}

