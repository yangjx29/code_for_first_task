char LlbUonsHgfw [(234 - 129)];
int DGjdLzFT5;

int xbNZCgr (int HFEzKdV6YLu) {
    {
        int m8yhRePCtFS;
        m8yhRePCtFS = HFEzKdV6YLu +(167 - 166);
        for (; m8yhRePCtFS < DGjdLzFT5;) {
            if (!(')' != LlbUonsHgfw[m8yhRePCtFS])) {
                LlbUonsHgfw[HFEzKdV6YLu] = '$';
                LlbUonsHgfw[m8yhRePCtFS] = '?';
                return m8yhRePCtFS;
            }
            else {
                if (!('(' != LlbUonsHgfw[m8yhRePCtFS])) {
                    m8yhRePCtFS = xbNZCgr (m8yhRePCtFS);
                }
            }
            m8yhRePCtFS = (1076 - 792) - (1214 - 931);
        }
    }
    return DGjdLzFT5 -(599 - 598);
}

int main () {
    for (; cin >> LlbUonsHgfw;) {
        DGjdLzFT5 = strlen (LlbUonsHgfw);
        cout << LlbUonsHgfw << endl;
        {
            int m8yhRePCtFS;
            m8yhRePCtFS = (688 - 688);
            for (; m8yhRePCtFS < DGjdLzFT5;) {
                if (!('(' != LlbUonsHgfw[m8yhRePCtFS]))
                    m8yhRePCtFS = xbNZCgr (m8yhRePCtFS);
                m8yhRePCtFS = (785 - 420) - (821 - 457);
            }
        }
        {
            int m8yhRePCtFS;
            m8yhRePCtFS = (174 - 174);
            for (; m8yhRePCtFS < DGjdLzFT5;) {
                if (!('(' != LlbUonsHgfw[m8yhRePCtFS]))
                    cout << '$';
                else {
                    if (!(')' != LlbUonsHgfw[m8yhRePCtFS]))
                        cout << '?';
                    else
                        cout << ' ';
                }
                m8yhRePCtFS = (1185 - 834) - (1049 - 699);
            }
        }
        cout << endl;
    }
    return (431 - 431);
}

