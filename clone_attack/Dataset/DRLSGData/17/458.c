int main () {
    int kB4eX5;
    int XOdkGt3;
    int FwBap0lQn3qK;
    char qnrGp2cZ [(1054 - 953)];
    int MaSdRe2njuYZ [(262 - 161)] = {(686 - 686)};
    int d9uOwLozpskY;
    int u63mp8;
    int lHUIP4Wf;
    char WGmOz5 [(688 - 587)];
    int FtAHZcQKT;
    int IvLzwpEtD2Xg;
    int iQU8tq;
    int SyumpEr;
    scanf ("%d", &FtAHZcQKT);
    SyumpEr = (154 - 154);
    IvLzwpEtD2Xg = (743 - 743);
    {
        iQU8tq = (376 - 75) - (907 - 606);
        for (; iQU8tq < FtAHZcQKT;) {
            int MaSdRe2njuYZ [(132 - 31)] = {(712 - 712)};
            SyumpEr = (115 - 115);
            IvLzwpEtD2Xg = (834 - 834);
            scanf ("%s", WGmOz5);
            FwBap0lQn3qK = strlen (WGmOz5);
            {
                lHUIP4Wf = (944 - 421) - (981 - 458);
                for (; lHUIP4Wf < FwBap0lQn3qK;) {
                    {
                        if ((271 - 271)) {
                            return (970 - 970);
                        };
                    }
                    if (WGmOz5[lHUIP4Wf] != '(' && WGmOz5[lHUIP4Wf] != ')')
                        qnrGp2cZ[lHUIP4Wf] = ' ';
                    if (!('(' != WGmOz5[lHUIP4Wf])) {
                        qnrGp2cZ[lHUIP4Wf] = '$';
                        MaSdRe2njuYZ[SyumpEr] = lHUIP4Wf;
                        SyumpEr = SyumpEr +(379 - 378);
                        IvLzwpEtD2Xg = IvLzwpEtD2Xg +(552 - 551);
                    }
                    if (!(')' != WGmOz5[lHUIP4Wf])) {
                        if (!((506 - 506) != IvLzwpEtD2Xg)) {
                            qnrGp2cZ[lHUIP4Wf] = '?';
                        }
                        else {
                            SyumpEr = SyumpEr -(89 - 88);
                            qnrGp2cZ[MaSdRe2njuYZ[SyumpEr]] = ' ';
                            qnrGp2cZ[lHUIP4Wf] = ' ';
                            IvLzwpEtD2Xg = IvLzwpEtD2Xg -(688 - 687);
                        };
                    }
                    lHUIP4Wf = (1415 - 858) - (873 - 317);
                };
            }
            printf ("%s\n", WGmOz5);
            {
                d9uOwLozpskY = (779 - 96) - (710 - 27);
                for (; d9uOwLozpskY < FwBap0lQn3qK;) {
                    printf ("%c", qnrGp2cZ[d9uOwLozpskY]);
                    d9uOwLozpskY = d9uOwLozpskY + (171 - 170);
                };
            }
            iQU8tq = iQU8tq + (456 - 455);
        };
    }
    return (540 - 540);
}

