int main () {
    int I2MyxvWD;
    int BCnypYI3fUDa [(437 - 336)];
    int npowDKxd [(122 - 21)];
    int jJTsfxqc9n2V;
    char x37bGm0FX [(402 - 300)];
    int b4Hjx6W;
    for (; (cin.getline (x37bGm0FX, (560 - 459)));) {
        I2MyxvWD = strlen (x37bGm0FX);
        {
            jJTsfxqc9n2V = (872 - 872);
            for (; jJTsfxqc9n2V <= I2MyxvWD;) {
                BCnypYI3fUDa[jJTsfxqc9n2V] = -(309 - 308);
                jJTsfxqc9n2V = jJTsfxqc9n2V + (230 - 229);
            }
        }
        cout << x37bGm0FX << endl;
        b4Hjx6W = (769 - 769);
        memset (npowDKxd, (652 - 652), sizeof (npowDKxd));
        {
            jJTsfxqc9n2V = (1536 - 876) - (683 - 23);
            for (; jJTsfxqc9n2V <= I2MyxvWD -(892 - 891);) {
                if (!('(' != x37bGm0FX[jJTsfxqc9n2V])) {
                    b4Hjx6W = b4Hjx6W + (797 - 796);
                    BCnypYI3fUDa[b4Hjx6W] = jJTsfxqc9n2V;
                }
                else if (!(')' != x37bGm0FX[jJTsfxqc9n2V])) {
                    if (!((272 - 272) != b4Hjx6W)) {
                        npowDKxd[jJTsfxqc9n2V] = (971 - 969);
                    }
                    else {
                        BCnypYI3fUDa[b4Hjx6W] = (140 - 140);
                        b4Hjx6W = b4Hjx6W - (542 - 541);
                    }
                }
                else {
                }
                jJTsfxqc9n2V = (358 - 284) - (844 - 771);
            }
        }
        {
            jJTsfxqc9n2V = (667 - 666);
            for (; b4Hjx6W >= jJTsfxqc9n2V;) {
                if (BCnypYI3fUDa[jJTsfxqc9n2V] != -(969 - 968))
                    npowDKxd[BCnypYI3fUDa[jJTsfxqc9n2V]] = (744 - 743);
                jJTsfxqc9n2V = jJTsfxqc9n2V + (126 - 125);
            }
        }
        {
            jJTsfxqc9n2V = (804 - 288) - (824 - 308);
            for (; jJTsfxqc9n2V <= I2MyxvWD -(690 - 689);) {
                if (!((122 - 121) != npowDKxd[jJTsfxqc9n2V]))
                    cout << '$';
                if (!((241 - 239) != npowDKxd[jJTsfxqc9n2V]))
                    cout << '?';
                if (npowDKxd[jJTsfxqc9n2V] == (903 - 903))
                    cout << ' ';
                jJTsfxqc9n2V = jJTsfxqc9n2V + (20 - 19);
            }
        }
        cout << endl;
    }
    return (235 - 235);
}

