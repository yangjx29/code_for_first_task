int main () {
    int isZeFED;
    int ToXqcUW49Q;
    int WZcqntJMUpVb;
    char m7twTgi9n [(842 - 741)];
    int MO7rQYNg;
    char WXCZA1rva [(306 - 205)];
    for (; cin.getline (m7twTgi9n, (546 - 445));) {
        isZeFED = (897 - 897);
        ToXqcUW49Q = strlen (m7twTgi9n);
        WZcqntJMUpVb = (30 - 30);
        {
            MO7rQYNg = (1194 - 402) - (1443 - 651);
            for (; ToXqcUW49Q > MO7rQYNg;) {
                WXCZA1rva[MO7rQYNg] = ' ';
                if (!('(' != m7twTgi9n[MO7rQYNg])) {
                    WZcqntJMUpVb = WZcqntJMUpVb +(891 - 890);
                }
                if (!(')' != m7twTgi9n[MO7rQYNg])) {
                    isZeFED = isZeFED + (580 - 579);
                    if (WZcqntJMUpVb < isZeFED) {
                        isZeFED = (573 - 573);
                        WZcqntJMUpVb = (678 - 678);
                        WXCZA1rva[MO7rQYNg] = '?';
                    }
                }
                MO7rQYNg = MO7rQYNg +(880 - 879);
            }
        }
        isZeFED = (68 - 68);
        WZcqntJMUpVb = (378 - 378);
        {
            MO7rQYNg = (1066 - 171) - (1351 - 457);
            for (; (549 - 549) <= MO7rQYNg;) {
                if (!('(' != m7twTgi9n[MO7rQYNg])) {
                    WZcqntJMUpVb = WZcqntJMUpVb +(936 - 935);
                    if (WZcqntJMUpVb > isZeFED) {
                        WXCZA1rva[MO7rQYNg] = '$';
                        isZeFED = (726 - 726);
                        WZcqntJMUpVb = (885 - 885);
                    }
                }
                if (!(')' != m7twTgi9n[MO7rQYNg])) {
                    isZeFED = isZeFED + (378 - 377);
                }
                MO7rQYNg = MO7rQYNg -(849 - 848);
            }
        }
        {
            MO7rQYNg = (983 - 706) - (319 - 42);
            for (; MO7rQYNg < ToXqcUW49Q;) {
                cout << m7twTgi9n[MO7rQYNg];
                MO7rQYNg = (371 - 46) - (1215 - 891);
            }
        }
        cout << endl;
        {
            MO7rQYNg = (1499 - 717) - (1237 - 455);
            for (; ToXqcUW49Q > MO7rQYNg;) {
                cout << WXCZA1rva[MO7rQYNg];
                MO7rQYNg = (1148 - 603) - (1273 - 729);
            }
        }
        cout << endl;
    }
    return (769 - 769);
}

