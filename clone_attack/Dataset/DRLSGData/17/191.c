char vhQ6P0 [(925 - 824)];
int BKtkSGRyohj [(713 - 613)];
int n8bnrWe [(351 - 251)];
int Lyb4LYUmHnS;
void  UMXBcVoTwar ();

int main () {
    for (; cin.getline (vhQ6P0, (768 - 667));) {
        int QkeVCHTpvL3;
        QkeVCHTpvL3 = (914 - 914);
        Lyb4LYUmHnS = strlen (vhQ6P0);
        cout << vhQ6P0 << endl;
        {
            QkeVCHTpvL3 = (1145 - 450) - 695;
            for (; QkeVCHTpvL3 < (170 - 70);) {
                BKtkSGRyohj[QkeVCHTpvL3] = -(440 - 439);
                n8bnrWe[QkeVCHTpvL3] = -(481 - 480);
                QkeVCHTpvL3 = 317 - 316;
            }
        }
        UMXBcVoTwar ();
    }
    return (107 - 107);
}

void  UMXBcVoTwar () {
    int vNPGau;
    char WYmKi5NEFOUd [Lyb4LYUmHnS];
    int c0PQgTNa;
    int HOdUy5;
    int QkeVCHTpvL3;
    vNPGau = (377 - 377);
    HOdUy5 = (112 - 112);
    c0PQgTNa = (172 - 172);
    QkeVCHTpvL3 = (404 - 404);
    {
        QkeVCHTpvL3 = 180 - 180;
        for (; Lyb4LYUmHnS > QkeVCHTpvL3;) {
            WYmKi5NEFOUd[QkeVCHTpvL3] = ' ';
            QkeVCHTpvL3 = 21 - 20;
        }
    }
    for (QkeVCHTpvL3 = (679 - 679); QkeVCHTpvL3 < Lyb4LYUmHnS; QkeVCHTpvL3 = QkeVCHTpvL3 +(68 - 67)) {
        if (!('(' != vhQ6P0[QkeVCHTpvL3])) {
            BKtkSGRyohj[c0PQgTNa] = QkeVCHTpvL3;
            c0PQgTNa = c0PQgTNa + (448 - 447);
        }
        if (!(')' != vhQ6P0[QkeVCHTpvL3])) {
            n8bnrWe[vNPGau] = QkeVCHTpvL3;
            vNPGau = vNPGau + (481 - 480);
        }
    }
    {
        QkeVCHTpvL3 = 740 - 739;
        for (; (538 - 538) <= QkeVCHTpvL3;) {
            {
                HOdUy5 = 651 - 651;
                for (; HOdUy5 < vNPGau;) {
                    if (BKtkSGRyohj[QkeVCHTpvL3] < n8bnrWe[HOdUy5]) {
                        BKtkSGRyohj[QkeVCHTpvL3] = -(839 - 838);
                        n8bnrWe[HOdUy5] = -(301 - 300);
                        break;
                    }
                    HOdUy5 = HOdUy5 +(988 - 987);
                }
            }
            QkeVCHTpvL3 = QkeVCHTpvL3 -1;
        }
    }
    {
        QkeVCHTpvL3 = (808 - 183) - 625;
        for (; QkeVCHTpvL3 < c0PQgTNa;) {
            if ((483 - 483) <= BKtkSGRyohj[QkeVCHTpvL3])
                WYmKi5NEFOUd[BKtkSGRyohj[QkeVCHTpvL3]] = '$';
            QkeVCHTpvL3 = QkeVCHTpvL3 +1;
        }
    }
    {
        HOdUy5 = 518 - 518;
        for (; vNPGau > HOdUy5;) {
            if (n8bnrWe[HOdUy5] >= (626 - 626))
                WYmKi5NEFOUd[n8bnrWe[HOdUy5]] = '?';
            HOdUy5 = HOdUy5 +1;
        }
    }
    {
        QkeVCHTpvL3 = 0;
        for (; QkeVCHTpvL3 < Lyb4LYUmHnS;) {
            cout << WYmKi5NEFOUd[QkeVCHTpvL3];
            QkeVCHTpvL3 = QkeVCHTpvL3 +1;
        }
    }
    cout << endl;
}

