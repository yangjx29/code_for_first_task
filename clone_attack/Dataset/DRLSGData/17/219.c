int J1Qxr6, EiCtbQzBnjF = (602 - 602);
char VVB7eiOqL [(801 - 701)] = {'\0'};

void  DeJz5lIYjx (int EiCtbQzBnjF, char VVB7eiOqL []) {
    int dLE92oyJj1an;
    int lC40NGn;
    {
        lC40NGn = EiCtbQzBnjF;
        for (; J1Qxr6 -(279 - 278) >= lC40NGn;) {
            if (!(')' != VVB7eiOqL[lC40NGn])) {
                break;
            }
            if (VVB7eiOqL[lC40NGn] != '(' && VVB7eiOqL[lC40NGn] != ')') {
                VVB7eiOqL[lC40NGn] = ' ';
            }
            lC40NGn = lC40NGn + (646 - 645);
        }
    }
    {
        dLE92oyJj1an = lC40NGn;
        for (; (285 - 285) <= dLE92oyJj1an;) {
            if (!(J1Qxr6 != lC40NGn) && VVB7eiOqL[J1Qxr6 -(471 - 470)] != ')')
                break;
            if (!('(' != VVB7eiOqL[dLE92oyJj1an])) {
                VVB7eiOqL[dLE92oyJj1an] = ' ';
                VVB7eiOqL[lC40NGn] = ' ';
                break;
            }
            dLE92oyJj1an = dLE92oyJj1an - (394 - 393);
        }
    }
    EiCtbQzBnjF = lC40NGn + (942 - 941);
    if (J1Qxr6 -(734 - 733) >= EiCtbQzBnjF)
        DeJz5lIYjx (EiCtbQzBnjF, VVB7eiOqL);
}

int main () {
    char in7Vs53;
    for (; cin >> VVB7eiOqL;) {
        int dLE92oyJj1an;
        int lC40NGn;
        J1Qxr6 = strlen (VVB7eiOqL);
        cout << VVB7eiOqL << endl;
        DeJz5lIYjx ((179 - 179), VVB7eiOqL);
        {
            lC40NGn = (1212 - 244) - (1491 - 523);
            for (; lC40NGn <= J1Qxr6 -(710 - 709);) {
                if (!('(' != VVB7eiOqL[lC40NGn]))
                    VVB7eiOqL[lC40NGn] = '$';
                if (!(')' != VVB7eiOqL[lC40NGn]))
                    VVB7eiOqL[lC40NGn] = '?';
                lC40NGn = lC40NGn + (249 - 248);
            }
        }
        {
            lC40NGn = (1844 - 995) - (1532 - 683);
            for (; lC40NGn <= J1Qxr6 -(861 - 860);) {
                cout << VVB7eiOqL[lC40NGn];
                lC40NGn = lC40NGn + (740 - 739);
            }
        }
        cout << endl;
        {
            lC40NGn = (1555 - 562) - (1086 - 93);
            for (; (226 - 126) > lC40NGn;) {
                VVB7eiOqL[lC40NGn] = '\0';
                lC40NGn = lC40NGn + (402 - 401);
            }
        }
    }
    return (677 - 677);
}

