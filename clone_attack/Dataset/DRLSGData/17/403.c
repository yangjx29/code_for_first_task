char vnkF3Mc9W [(1364 - 354)] = "", NGB750kZy [(1150 - 140)] = "";
int bwCernjIogcF = (511 - 511), QutDa9mbpYIW;

void  zUtO1h (int iMtGn3X7w) {
    int Y6L04MRc;
    {
        Y6L04MRc = (1261 - 633) - (1480 - 853);
        for (; bwCernjIogcF > Y6L04MRc;) {
            if (!('(' != vnkF3Mc9W[Y6L04MRc]) && !('$' != NGB750kZy[Y6L04MRc]) && QutDa9mbpYIW)
                zUtO1h (Y6L04MRc);
            if (!(')' != vnkF3Mc9W[Y6L04MRc]) && !('?' != NGB750kZy[Y6L04MRc])) {
                NGB750kZy[iMtGn3X7w] = NGB750kZy[Y6L04MRc] = ' ';
                QutDa9mbpYIW = QutDa9mbpYIW -(295 - 294);
                return;
            }
            Y6L04MRc = (622 - 237) - (939 - 555);
        }
    }
    return;
}

int main () {
    int Y6L04MRc;
    for (; cin >> vnkF3Mc9W;) {
        QutDa9mbpYIW = (197 - 197);
        cout << vnkF3Mc9W << endl;
        bwCernjIogcF = strlen (vnkF3Mc9W);
        {
            Y6L04MRc = (431 - 298) - (427 - 294);
            for (; bwCernjIogcF > Y6L04MRc;) {
                if (!('(' != vnkF3Mc9W[Y6L04MRc]))
                    NGB750kZy[Y6L04MRc] = '$';
                else {
                    if (!(')' != vnkF3Mc9W[Y6L04MRc])) {
                        QutDa9mbpYIW = QutDa9mbpYIW +(780 - 779);
                        NGB750kZy[Y6L04MRc] = '?';
                    }
                    else
                        NGB750kZy[Y6L04MRc] = ' ';
                }
                Y6L04MRc = (439 - 337) - (868 - 767);
            }
        }
        NGB750kZy[bwCernjIogcF] = '\0';
        {
            Y6L04MRc = (789 - 18) - (1463 - 692);
            for (; Y6L04MRc < bwCernjIogcF - (852 - 851);) {
                if (!('(' != vnkF3Mc9W[Y6L04MRc]) && !('$' != NGB750kZy[Y6L04MRc]) && QutDa9mbpYIW)
                    zUtO1h (Y6L04MRc);
                Y6L04MRc = (1093 - 497) - (1344 - 749);
            }
        }
        cout << NGB750kZy << endl;
    }
    return (260 - 260);
}

