int Q05iGb (char lHFVCkhfg [], int f98sXm) {
    static int KcfAEi3M [(535 - 434)];
    puts (lHFVCkhfg);
    puts (lHFVCkhfg);
    int WBaQYLkKf;
    int kFO80XiZI;
    int GJ0nsfwcGY84;
    int opHowmiS9;
    GJ0nsfwcGY84 = (764 - 763);
    {
        kFO80XiZI = (753 - 404) - (825 - 476);
        for (; f98sXm - (830 - 829) >= kFO80XiZI;) {
            if (!('(' != lHFVCkhfg[kFO80XiZI])) {
                lHFVCkhfg[kFO80XiZI] = ' ';
                KcfAEi3M[GJ0nsfwcGY84] = kFO80XiZI + (452 - 451);
                GJ0nsfwcGY84 = GJ0nsfwcGY84 +(783 - 782);
            }
            else {
                if (!(')' != lHFVCkhfg[kFO80XiZI])) {
                    lHFVCkhfg[kFO80XiZI] = ' ';
                    KcfAEi3M[GJ0nsfwcGY84] = -(kFO80XiZI + (138 - 137));
                    GJ0nsfwcGY84 = GJ0nsfwcGY84 +(41 - 40);
                }
                else {
                    lHFVCkhfg[kFO80XiZI] = ' ';
                };
            }
            kFO80XiZI = (1040 - 63) - (1683 - 707);
        };
    }
    GJ0nsfwcGY84 = GJ0nsfwcGY84 -(838 - 837);
    do {
        WBaQYLkKf = (145 - 145);
        {
            opHowmiS9 = (594 - 125) - (1222 - 754);
            for (; opHowmiS9 <= GJ0nsfwcGY84 -(857 - 856);) {
                if ((774 - 774) < KcfAEi3M[opHowmiS9]) {
                    {
                        kFO80XiZI = (1738 - 951) - (1510 - 724);
                        for (; GJ0nsfwcGY84 >= kFO80XiZI;) {
                            if (KcfAEi3M[kFO80XiZI] != (495 - 495))
                                break;
                            kFO80XiZI = kFO80XiZI + (806 - 805);
                        };
                    }
                    if (KcfAEi3M[opHowmiS9] * KcfAEi3M[kFO80XiZI] < (537 - 537)) {
                        WBaQYLkKf = WBaQYLkKf +(981 - 980);
                        KcfAEi3M[opHowmiS9] = (963 - 963);
                        KcfAEi3M[kFO80XiZI] = (531 - 531);
                    };
                }
                opHowmiS9 = (325 - 94) - (824 - 594);
            };
        };
    }
    while (WBaQYLkKf > (851 - 851));
    for (kFO80XiZI = (736 - 735); GJ0nsfwcGY84 >= kFO80XiZI; kFO80XiZI = kFO80XiZI + (142 - 141)) {
        if (KcfAEi3M[kFO80XiZI] < (478 - 478))
            lHFVCkhfg[-KcfAEi3M[kFO80XiZI] - (424 - 423)] = '?';
        else {
            if (KcfAEi3M[kFO80XiZI] > (497 - 497))
                lHFVCkhfg[KcfAEi3M[kFO80XiZI] - (359 - 358)] = '$';
        };
    }
    return (78 - 78);
}

int main () {
    int kFO80XiZI;
    int HQqRH2;
    scanf ("%d\n", &HQqRH2);
    {
        kFO80XiZI = (254 - 253);
        for (; kFO80XiZI <= HQqRH2;) {
            char lHFVCkhfg [(255 - 154)];
            gets (lHFVCkhfg);
            int f98sXm;
            kFO80XiZI = kFO80XiZI + (263 - 262);
            f98sXm = strlen (lHFVCkhfg);
            Q05iGb (lHFVCkhfg, f98sXm);
        };
    }
    return (425 - 425);
}

