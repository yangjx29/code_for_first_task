char U9RcYqzf [(771 - 661)] = {'\0'}, UMRzlKm [(474 - 364)] = {'\0'};
int QKdXR32Eujfa, goCbzljG8, N92I7YsoAbw, mSEM6c;

int KJPDtL () {
    {
        QKdXR32Eujfa = (764 - 557) - (430 - 223);
        for (; QKdXR32Eujfa < mSEM6c - (172 - 171);) {
            {
                if (0) {
                    return 0;
                }
            }
            {
                goCbzljG8 = (969 - 717) - (484 - 233);
                for (; QKdXR32Eujfa +goCbzljG8 < mSEM6c;) {
                    if (!('(' != U9RcYqzf[QKdXR32Eujfa]) && !(' ' != U9RcYqzf[QKdXR32Eujfa +goCbzljG8])) {
                        continue;
                    }
                    if (!('(' != U9RcYqzf[QKdXR32Eujfa]) && !('(' != U9RcYqzf[QKdXR32Eujfa +goCbzljG8])) {
                        break;
                    }
                    if (!('(' != U9RcYqzf[QKdXR32Eujfa]) && !(')' != U9RcYqzf[QKdXR32Eujfa +goCbzljG8])) {
                        U9RcYqzf[QKdXR32Eujfa] = ' ';
                        U9RcYqzf[QKdXR32Eujfa +goCbzljG8] = ' ';
                    }
                    goCbzljG8 = goCbzljG8 + (359 - 358);
                }
            }
            QKdXR32Eujfa = QKdXR32Eujfa +(763 - 762);
        }
    }
    N92I7YsoAbw = N92I7YsoAbw +(724 - 723);
    if (!(mSEM6c != N92I7YsoAbw)) {
        return (470 - 470);
    }
    if (N92I7YsoAbw != mSEM6c) {
        KJPDtL ();
    }
}

int main () {
    for (; cin.getline (U9RcYqzf, (387 - 277), '\n');) {
        N92I7YsoAbw = (628 - 628);
        strcpy (UMRzlKm, U9RcYqzf);
        mSEM6c = strlen (U9RcYqzf);
        {
            QKdXR32Eujfa = (1145 - 700) - (1248 - 803);
            for (; mSEM6c > QKdXR32Eujfa;) {
                if (U9RcYqzf[QKdXR32Eujfa] != '(' && U9RcYqzf[QKdXR32Eujfa] != ')') {
                    U9RcYqzf[QKdXR32Eujfa] = ' ';
                }
                QKdXR32Eujfa = (1223 - 419) - (1432 - 629);
            }
        }
        KJPDtL ();
        cout << UMRzlKm << endl;
        {
            QKdXR32Eujfa = (658 - 536) - (707 - 585);
            for (; mSEM6c > QKdXR32Eujfa;) {
                if (!('(' != U9RcYqzf[QKdXR32Eujfa])) {
                    cout << "$";
                }
                if (!(')' != U9RcYqzf[QKdXR32Eujfa])) {
                    cout << "?";
                }
                if (!(' ' != U9RcYqzf[QKdXR32Eujfa])) {
                    cout << " ";
                }
                QKdXR32Eujfa = (696 - 492) - (687 - 484);
            }
        }
        cout << endl;
    }
    return (516 - 516);
}

