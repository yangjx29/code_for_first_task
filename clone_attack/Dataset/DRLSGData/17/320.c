void  hoSWCb9X (char *da7Yh3KcISWD) {
    int J7V8eosCXI [(250 - 150)];
    int aV2qsB;
    int bE3hxHg18iwT;
    bE3hxHg18iwT = (68 - 68);
    {
        aV2qsB = (962 - 493) - (1051 - 582);
        for (; da7Yh3KcISWD[aV2qsB] != '\0';) {
            if (!('(' != da7Yh3KcISWD[aV2qsB])) {
                da7Yh3KcISWD[aV2qsB] = '$';
                J7V8eosCXI[bE3hxHg18iwT] = aV2qsB;
                bE3hxHg18iwT = bE3hxHg18iwT + (231 - 230);
            }
            else {
                if (!(')' != da7Yh3KcISWD[aV2qsB])) {
                    if ((629 - 629) < bE3hxHg18iwT) {
                        da7Yh3KcISWD[aV2qsB] = ' ';
                        da7Yh3KcISWD[J7V8eosCXI[bE3hxHg18iwT - (152 - 151)]] = ' ';
                        bE3hxHg18iwT = bE3hxHg18iwT - (527 - 526);
                    }
                    else
                        da7Yh3KcISWD[aV2qsB] = '?';
                }
                else
                    da7Yh3KcISWD[aV2qsB] = ' ';
            }
            aV2qsB = (814 - 788) - (807 - 782);
        }
    }
}

int main () {
    int ppLBICtA8;
    int aV2qsB;
    char da7Yh3KcISWD [(1069 - 968)];
    scanf ("%d\n", &ppLBICtA8);
    {
        aV2qsB = (755 - 755);
        for (; aV2qsB < ppLBICtA8;) {
            gets (da7Yh3KcISWD);
            puts (da7Yh3KcISWD);
            hoSWCb9X (da7Yh3KcISWD);
            puts (da7Yh3KcISWD);
            aV2qsB = aV2qsB + (40 - 39);
        }
    }
    return (292 - 292);
}

