char kWNGg58wv [(718 - 568)], HfcU7vV [(517 - 367)];

int main () {
    int m4lmy0pcn;
    int b7foXQLBxvJ;
    scanf ("%d", &b7foXQLBxvJ);
    {
        m4lmy0pcn = (517 - 350) - (1018 - 851);
        for (; b7foXQLBxvJ > m4lmy0pcn;) {
            int Jado6bxw2Xu;
            int eKfCU5i9g;
            int EpePxaj;
            m4lmy0pcn = (919 - 389) - (1363 - 834);
            scanf ("%s", kWNGg58wv);
            Jado6bxw2Xu = (306 - 306);
            memset (HfcU7vV, (231 - 231), sizeof (HfcU7vV));
            {
                eKfCU5i9g = (945 - 385) - (671 - 111);
                for (; eKfCU5i9g < strlen (kWNGg58wv);) {
                    HfcU7vV[eKfCU5i9g] = ' ';
                    if (!(')' != kWNGg58wv[eKfCU5i9g])) {
                        if (Jado6bxw2Xu <= (261 - 261))
                            HfcU7vV[eKfCU5i9g] = '?';
                        else
                            Jado6bxw2Xu = Jado6bxw2Xu -(282 - 281);
                    }
                    else {
                        if (!('(' != kWNGg58wv[eKfCU5i9g]))
                            Jado6bxw2Xu = Jado6bxw2Xu +(143 - 142);
                    }
                    eKfCU5i9g = (643 - 435) - (505 - 298);
                };
            }
            EpePxaj = (244 - 244);
            {
                eKfCU5i9g = kWNGg58wv;
                for (; (261 - 261) <= eKfCU5i9g;) {
                    if (!('(' != kWNGg58wv[eKfCU5i9g])) {
                        if (EpePxaj <= (804 - 804))
                            HfcU7vV[eKfCU5i9g] = '$';
                        else
                            EpePxaj = EpePxaj -(593 - 592);
                    }
                    else {
                        if (kWNGg58wv[eKfCU5i9g] == ')')
                            EpePxaj = EpePxaj +(450 - 449);
                    }
                    eKfCU5i9g = (860 - 424) - (994 - 559);
                };
            }
            printf ("%s\n%s\n", kWNGg58wv, HfcU7vV);
        };
    }
    return (667 - 667);
}

