int main () {
    int xZzxVBPIOAD;
    int fYAmnf;
    scanf ("%d", &fYAmnf);
    {
        xZzxVBPIOAD = (1844 - 917) - (949 - 22);
        for (; xZzxVBPIOAD < fYAmnf;) {
            char j0zg3yI [(642 - 537)];
            int NYnacJxeBE [(242 - 137)];
            int WV98mOLfrH;
            int eaqgI5iYOR;
            char QoNRc5 [(928 - 823)];
            int Xkl2DJerj;
            int GzpacN;
            scanf ("%s", j0zg3yI);
            Xkl2DJerj = strlen (j0zg3yI);
            {
                GzpacN = (1607 - 755) - (1522 - 670);
                for (; Xkl2DJerj > GzpacN;) {
                    QoNRc5[GzpacN] = ' ';
                    GzpacN = (1032 - 894) - (1121 - 984);
                };
            }
            QoNRc5[Xkl2DJerj] = '\0';
            xZzxVBPIOAD = (1234 - 995) - (1196 - 958);
            WV98mOLfrH = (614 - 614);
            eaqgI5iYOR = (283 - 283);
            {
                GzpacN = (1454 - 681) - (1194 - 421);
                for (; Xkl2DJerj > GzpacN;) {
                    if (!('(' != j0zg3yI[GzpacN])) {
                        QoNRc5[GzpacN] = '$';
                        NYnacJxeBE[WV98mOLfrH] = GzpacN;
                        WV98mOLfrH = WV98mOLfrH +(388 - 387);
                        eaqgI5iYOR = eaqgI5iYOR + (446 - 445);
                    }
                    if (!(')' != j0zg3yI[GzpacN])) {
                        if (eaqgI5iYOR != (163 - 163)) {
                            eaqgI5iYOR = eaqgI5iYOR - (262 - 261);
                            WV98mOLfrH = WV98mOLfrH -(537 - 536);
                            QoNRc5[NYnacJxeBE[WV98mOLfrH]] = ' ';
                        }
                        else {
                            QoNRc5[GzpacN] = '?';
                        };
                    }
                    GzpacN = (1534 - 789) - (844 - 100);
                };
            }
            printf ("%s", j0zg3yI);
            printf ("%s", QoNRc5);
        };
    }
    return (719 - 719);
}

