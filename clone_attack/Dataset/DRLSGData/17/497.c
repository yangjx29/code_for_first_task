int main () {
    char ord2Sey [(244 - 39)];
    for (; cin.getline (ord2Sey, (1045 - 845));) {
        int qG7QPWv;
        int zVQHqcop07;
        int wH7TI6A;
        int sCvOlKVmB [(882 - 677)] = {-(541 - 540)};
        char JBCP5J [(479 - 274)];
        int SsJ6WZnMvq1 [(627 - 422)] = {-(966 - 965)};
        int jlzTYfK;
        int QJXcjQL;
        int hTdopjA0wCBY;
        QJXcjQL = (389 - 389);
        qG7QPWv = strlen (ord2Sey);
        {
            jlzTYfK = (533 - 436) - (712 - 615);
            for (; qG7QPWv > jlzTYfK;) {
                JBCP5J[jlzTYfK] = ' ';
                jlzTYfK = (310 - 74) - (258 - 23);
            }
        }
        zVQHqcop07 = (355 - 355);
        for (jlzTYfK = (203 - 203); qG7QPWv > jlzTYfK; jlzTYfK = jlzTYfK + (167 - 166)) {
            if (!('(' != ord2Sey[jlzTYfK])) {
                zVQHqcop07 = zVQHqcop07 + (896 - 895);
                sCvOlKVmB[zVQHqcop07] = jlzTYfK;
            }
            if (!(')' != ord2Sey[jlzTYfK])) {
                QJXcjQL = QJXcjQL +(45 - 44);
                SsJ6WZnMvq1[QJXcjQL] = jlzTYfK;
                if ((zVQHqcop07 != (729 - 729)) && (sCvOlKVmB[zVQHqcop07] < SsJ6WZnMvq1[QJXcjQL])) {
                    sCvOlKVmB[zVQHqcop07] = -(974 - 973);
                    zVQHqcop07 = zVQHqcop07 - (345 - 344);
                    SsJ6WZnMvq1[QJXcjQL] = -(996 - 995);
                    QJXcjQL = QJXcjQL -(697 - 696);
                }
            }
        }
        cout << ord2Sey << endl;
        {
            jlzTYfK = (1301 - 449) - (1591 - 740);
            for (; zVQHqcop07 >= jlzTYfK;) {
                JBCP5J[sCvOlKVmB[jlzTYfK]] = '$';
                jlzTYfK = (685 - 377) - (1142 - 835);
            }
        }
        for (jlzTYfK = (78 - 77); jlzTYfK <= QJXcjQL; jlzTYfK = jlzTYfK + (821 - 820))
            JBCP5J[SsJ6WZnMvq1[jlzTYfK]] = '?';
        {
            jlzTYfK = (934 - 609) - (776 - 451);
            for (; qG7QPWv > jlzTYfK;) {
                cout << JBCP5J[jlzTYfK];
                jlzTYfK = (653 - 294) - (1218 - 860);
            }
        }
        cout << endl;
    }
    return (102 - 102);
}

