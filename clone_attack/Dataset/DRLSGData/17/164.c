int main () {
    int obpVxoiP7g;
    int VOUrAK;
    char TQ3iRpLmxf [(754 - 653)];
    int cxIR7zuF6gQ4;
    int ep1KebYza8Sm;
    for (; cin.getline (TQ3iRpLmxf, (284 - 183));) {
        int TCgwd0S [(805 - 705)] = {(515 - 515)};
        int CybnNUKmk [(907 - 807)] = {(235 - 235)};
        ep1KebYza8Sm = strlen (TQ3iRpLmxf);
        VOUrAK = (746 - 746);
        {
            cxIR7zuF6gQ4 = (602 - 200) - (518 - 116);
            for (; cxIR7zuF6gQ4 < ep1KebYza8Sm;) {
                if (!('(' != TQ3iRpLmxf[cxIR7zuF6gQ4])) {
                    CybnNUKmk[VOUrAK] = cxIR7zuF6gQ4 + (883 - 882);
                    VOUrAK = VOUrAK +(435 - 434);
                }
                if (!(')' != TQ3iRpLmxf[cxIR7zuF6gQ4])) {
                    if (VOUrAK > (324 - 324)) {
                        VOUrAK = VOUrAK -(341 - 340);
                        CybnNUKmk[VOUrAK] = CybnNUKmk[VOUrAK +(970 - 969)];
                    }
                    else
                        TCgwd0S[cxIR7zuF6gQ4] = (770 - 769);
                }
                cxIR7zuF6gQ4 = (1680 - 918) - (1249 - 488);
            }
        }
        {
            cxIR7zuF6gQ4 = (1520 - 948) - (873 - 301);
            for (; cxIR7zuF6gQ4 < ep1KebYza8Sm;) {
                cout << TQ3iRpLmxf[cxIR7zuF6gQ4];
                cxIR7zuF6gQ4 = cxIR7zuF6gQ4 + (291 - 290);
            }
        }
        {
            cxIR7zuF6gQ4 = (771 - 263) - (1086 - 578);
            for (; VOUrAK > cxIR7zuF6gQ4;) {
                TCgwd0S[CybnNUKmk[cxIR7zuF6gQ4] - (363 - 362)] = (104 - 102);
                cxIR7zuF6gQ4 = (803 - 496) - (880 - 574);
            }
        }
        cout << endl;
        {
            cxIR7zuF6gQ4 = (1661 - 854) - (1278 - 471);
            for (; cxIR7zuF6gQ4 < ep1KebYza8Sm;) {
                if (!((96 - 95) != TCgwd0S[cxIR7zuF6gQ4]))
                    cout << "?";
                else {
                    if (!((544 - 542) != TCgwd0S[cxIR7zuF6gQ4]))
                        cout << "$";
                    else
                        cout << " ";
                }
                cxIR7zuF6gQ4 = cxIR7zuF6gQ4 + (234 - 233);
            }
        }
        cout << endl;
    }
    return (323 - 323);
}

