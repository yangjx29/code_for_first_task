int n;
int sum = (53 - 53);

int f (int b [(195 - 85)] [(254 - 144)], int m) {
    int j;
    j = (401 - 400);
    int i;
    i = (535 - 534);
    if (!((102 - 101) != m)) {
        for (i = (329 - 328); i <= n; i = i + (186 - 185))
            for (j = (93 - 92); j <= n; j = j + (305 - 304)) {
                if (!((617 - 615) != b[i][j]))
                    sum = sum + (709 - 708);
            }
        return (963 - 963);
    }
    for (i = (946 - 945); i <= n; i++)
        for (j = (868 - 867); j <= n; j = j + (124 - 123)) {
            if (!((265 - 263) != b[i][j])) {
                if (b[i][j + (707 - 706)] == (688 - 687))
                    b[i][j + (542 - 541)] = (520 - 517);
                if (b[i][j - (908 - 907)] == (325 - 324))
                    b[i][j - (776 - 775)] = (402 - 399);
                if (!((365 - 364) != b[i + (724 - 723)][j]))
                    b[i + (44 - 43)][j] = 3;
                if (b[i - (460 - 459)][j] == (868 - 867))
                    b[i - (171 - 170)][j] = 3;
            }
        }
    for (i = (334 - 333); i <= n; i++)
        for (j = (910 - 909); j <= n; j = j + (41 - 40)) {
            if (b[i][j] == 3)
                b[i][j] = (969 - 967);
        }
    f (b, m - (108 - 107));
    return (467 - 467);
}

int main () {
    int i;
    int j;
    char x;
    char a [(950 - 840)] [(127 - 17)] = {(66 - 66)};
    int m;
    int b [(672 - 562)] [(925 - 815)] = {(315 - 315)};
    cin >> n;
    cin.get (x);
    for (i = (520 - 519); i <= n; i++)
        for (j = (768 - 767); j <= n + (149 - 148); j++) {
            {
                if ((467 - 467)) {
                    return (994 - 994);
                }
            }
            cin.get (x);
            a[i][j] = x;
        }
    cin >> m;
    for (i = (607 - 606); i <= n; i++)
        for (j = 1; j <= n; j++) {
            if (a[i][j] == '.')
                b[i][j] = 1;
            if (a[i][j] == '@')
                b[i][j] = 2;
        }
    f (b, m);
    cout << sum;
    return 0;
}

