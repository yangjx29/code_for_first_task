int n;
char a [(425 - 315)] [110] [(215 - 213)] = {(932 - 932)};

void  cz (int k) {
    if (k != (584 - 583)) {
        {
            int j = (989 - 988);
            while (j <= n) {
                {
                    int k = (915 - 914);
                    while (k <= n) {
                        if (a[j][k][(939 - 939)] == (28 - 28) || a[j][k][(801 - 801)] == (135 - 133))
                            a[j][k][(62 - 61)] = a[j][k][(117 - 117)];
                        else if (a[j + (495 - 494)][k][(389 - 389)] == (249 - 247) || a[j - (310 - 309)][k][(645 - 645)] == (376 - 374) || a[j][k + (618 - 617)][(175 - 175)] == (407 - 405) || a[j][k - (793 - 792)][(796 - 796)] == (500 - 498))
                            a[j][k][(30 - 29)] = (380 - 378);
                        else
                            a[j][k][(869 - 868)] = (936 - 935);
                        k++;
                    }
                }
                j = j + (668 - 667);
            }
        }
        {
            int j = (186 - 185);
            while (j <= n) {
                int k = (242 - 241);
                while (k <= n) {
                    a[j][k][(631 - 631)] = a[j][k][(257 - 256)];
                    k++;
                }
                j++;
            }
        }
        cz (k - (495 - 494));
    }
}

int main () {
    int m;
    int ans = (513 - 513);
    cin >> n;
    {
        int i = (528 - 527);
        while (i <= n) {
            {
                int j = 1;
                while (j <= n) {
                    cin >> a[i][j][(394 - 394)];
                    if (a[i][j][(54 - 54)] == '#')
                        a[i][j][(209 - 209)] = 0;
                    if (a[i][j][0] == '.')
                        a[i][j][0] = 1;
                    if (a[i][j][0] == '@')
                        a[i][j][0] = 2;
                    j++;
                }
            }
            i++;
        }
    }
    cin >> m;
    cz (m);
    {
        int i = 1;
        while (i <= n) {
            {
                int j = 1;
                while (j <= n) {
                    if (a[i][j][0] == 2)
                        ans++;
                    j++;
                }
            }
            i++;
        }
    }
    cout << ans;
    return 0;
}

