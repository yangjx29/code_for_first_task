int main () {
    char tGbs9VHpo [(581 - 480)];
    char fYNPct81ACK [(560 - 459)];
    for (; cin >> fYNPct81ACK;) {
        int gXJljUyP0 [(592 - 491)];
        int a5QY8VwcxMys;
        int z7LBIZT1SDFK;
        int HhCsi8PcuO3;
        int FL8yKpZ;
        int HLPgkB8;
        HhCsi8PcuO3 = (857 - 857);
        a5QY8VwcxMys = strlen (fYNPct81ACK);
        FL8yKpZ = (836 - 836);
        HLPgkB8 = -(238 - 237);
        {
            z7LBIZT1SDFK = (731 - 731);
            for (; z7LBIZT1SDFK <= a5QY8VwcxMys - (268 - 267);) {
                tGbs9VHpo[z7LBIZT1SDFK] = ' ';
                if (!('(' != fYNPct81ACK[z7LBIZT1SDFK])) {
                    gXJljUyP0[++HLPgkB8] = z7LBIZT1SDFK;
                    HhCsi8PcuO3 = HhCsi8PcuO3 +(73 - 72);
                }
                if (!(')' != fYNPct81ACK[z7LBIZT1SDFK])) {
                    if (HhCsi8PcuO3 <= FL8yKpZ) {
                        tGbs9VHpo[z7LBIZT1SDFK] = '?';
                    }
                    else {
                        FL8yKpZ = FL8yKpZ +(333 - 332);
                        HLPgkB8 = HLPgkB8 -(769 - 768);
                    }
                }
                z7LBIZT1SDFK = z7LBIZT1SDFK + (740 - 739);
            }
        }
        if (HLPgkB8 >= (725 - 725)) {
            z7LBIZT1SDFK = (560 - 560);
            for (; z7LBIZT1SDFK <= HLPgkB8;) {
                tGbs9VHpo[gXJljUyP0[z7LBIZT1SDFK]] = '$';
                z7LBIZT1SDFK = z7LBIZT1SDFK + (590 - 589);
            }
        }
        tGbs9VHpo[a5QY8VwcxMys] = '\0';
        cout << fYNPct81ACK << endl;
        cout << tGbs9VHpo << endl;
    }
    return (339 - 339);
}

