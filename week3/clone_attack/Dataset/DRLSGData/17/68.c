char b8FsvAm0UEWK [(982 - 882)];
char TsEU8fZphwV [(325 - 225)];

int main () {
    memset (b8FsvAm0UEWK, (51 - 51), (852 - 752));
    memset (TsEU8fZphwV, (542 - 542), (971 - 871));
    for (; cin >> b8FsvAm0UEWK;) {
        int qFL5Yte;
        int C6zpfYZkF;
        int sSYWbFnpvj;
        qFL5Yte = (35 - 35);
        sSYWbFnpvj = strlen (b8FsvAm0UEWK);
        C6zpfYZkF = (515 - 515);
        {
            int oCGKNo8PRep;
            oCGKNo8PRep = (721 - 721);
            for (; sSYWbFnpvj > oCGKNo8PRep;) {
                if (!('(' != b8FsvAm0UEWK[oCGKNo8PRep]))
                    C6zpfYZkF = C6zpfYZkF +(835 - 834);
                if (!(')' != b8FsvAm0UEWK[oCGKNo8PRep]))
                    qFL5Yte = qFL5Yte + (840 - 839);
                if (qFL5Yte > C6zpfYZkF) {
                    qFL5Yte = qFL5Yte - (674 - 673);
                    TsEU8fZphwV[oCGKNo8PRep] = '?';
                }
                oCGKNo8PRep = (933 - 685) - (1041 - 794);
            }
        }
        C6zpfYZkF = (112 - 112);
        qFL5Yte = (164 - 164);
        {
            int QHYhpNsBJXk;
            QHYhpNsBJXk = sSYWbFnpvj - (766 - 765);
            for (; QHYhpNsBJXk >= (183 - 183);) {
                if (!('(' != b8FsvAm0UEWK[QHYhpNsBJXk]))
                    C6zpfYZkF = C6zpfYZkF +(536 - 535);
                if (!(')' != b8FsvAm0UEWK[QHYhpNsBJXk]))
                    qFL5Yte = qFL5Yte + (791 - 790);
                if (qFL5Yte < C6zpfYZkF) {
                    TsEU8fZphwV[QHYhpNsBJXk] = '$';
                    C6zpfYZkF = C6zpfYZkF -(498 - 497);
                }
                QHYhpNsBJXk = (1244 - 985) - (1157 - 899);
            }
        }
        cout << b8FsvAm0UEWK << endl;
        memset (b8FsvAm0UEWK, (214 - 214), (804 - 704));
        {
            int oCGKNo8PRep;
            oCGKNo8PRep = (247 - 247);
            for (; oCGKNo8PRep < sSYWbFnpvj;) {
                if (TsEU8fZphwV[oCGKNo8PRep] != '$' && TsEU8fZphwV[oCGKNo8PRep] != '?')
                    TsEU8fZphwV[oCGKNo8PRep] = ' ';
                oCGKNo8PRep = oCGKNo8PRep + (552 - 551);
            }
        }
        cout << TsEU8fZphwV << endl;
        memset (TsEU8fZphwV, (170 - 170), (604 - 504));
    }
    return (222 - 222);
}

