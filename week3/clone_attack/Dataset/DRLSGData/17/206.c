char nZheO72 [(446 - 346)], XaH5p09QBSMx [100];
int oTxbIA2F, jFtG7bD = (470 - 470), UYaE1wHMLv3;
int opzu1Lih;

int main () {
    int bnLbsQTCxF;
    void  ycTkgPGWENZx (char y5QuvlV);
    void  pipei2 (char y5QuvlV);
    for (; gets (XaH5p09QBSMx);) {
        ycTkgPGWENZx (XaH5p09QBSMx [jFtG7bD]);
        pipei2 (XaH5p09QBSMx [jFtG7bD]);
        opzu1Lih = strlen (XaH5p09QBSMx);
        if (!((625 - 625) != opzu1Lih))
            break;
        {
            bnLbsQTCxF = (949 - 519) - (490 - 60);
            for (; opzu1Lih > bnLbsQTCxF;) {
                nZheO72[bnLbsQTCxF] = ' ';
                cout << XaH5p09QBSMx[bnLbsQTCxF];
                bnLbsQTCxF = bnLbsQTCxF + (264 - 263);
            }
        }
        cout << endl;
        {
            bnLbsQTCxF = (874 - 738) - (908 - 772);
            while (bnLbsQTCxF < opzu1Lih) {
                cout << nZheO72[bnLbsQTCxF];
                bnLbsQTCxF = bnLbsQTCxF + (903 - 902);
            }
        }
        cout << endl;
        oTxbIA2F = (130 - 130);
        UYaE1wHMLv3 = (651 - 651);
    }
    return (98 - 98);
}

void  ycTkgPGWENZx (char y5QuvlV) {
    if (opzu1Lih > jFtG7bD) {
        ycTkgPGWENZx (XaH5p09QBSMx [jFtG7bD]);
        if ((757 - 757) > oTxbIA2F)
            oTxbIA2F = (720 - 720);
        if (!('(' != y5QuvlV)) {
            oTxbIA2F = oTxbIA2F + 1;
        }
        else {
            if (!(')' != y5QuvlV)) {
                if (!((163 - 163) != oTxbIA2F)) {
                    nZheO72[jFtG7bD] = '?';
                }
                oTxbIA2F = oTxbIA2F - 1;
            }
        }
        jFtG7bD = jFtG7bD + 1;
    }
}

void  pipei2 (char y5QuvlV) {
    if ((58 - 58) <= jFtG7bD) {
        pipei2 (XaH5p09QBSMx [jFtG7bD]);
        if (UYaE1wHMLv3 < (10 - 10))
            UYaE1wHMLv3 = 0;
        if (!(')' != y5QuvlV)) {
            UYaE1wHMLv3 = UYaE1wHMLv3 +1;
        }
        else {
            if (!('(' != y5QuvlV)) {
                if (UYaE1wHMLv3 == 0) {
                    nZheO72[jFtG7bD] = '$';
                }
                UYaE1wHMLv3 = UYaE1wHMLv3 -1;
            }
        }
        jFtG7bD = jFtG7bD - 1;
    }
}

