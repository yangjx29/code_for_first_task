int FAiZWfvQDRl (char H2M3GJNWa [], int ZFERvBKoC2, int IsHKlrDZJy) {
    int C6HykJQeVs0;
    int IanQL6Zu;
    int qyFH0Sad;
    IanQL6Zu = (801 - 801);
    C6HykJQeVs0 = (348 - 347);
    {
        qyFH0Sad = (1002 - 730) - (1195 - 924);
        for (; qyFH0Sad < IsHKlrDZJy;) {
            if (!('(' != H2M3GJNWa[qyFH0Sad])) {
                C6HykJQeVs0 = C6HykJQeVs0 +(962 - 961);
            }
            else {
                if (!(')' != H2M3GJNWa[qyFH0Sad])) {
                    IanQL6Zu = IanQL6Zu +(648 - 647);
                }
            }
            if (!(IanQL6Zu != C6HykJQeVs0)) {
                return (703 - 702);
            }
            qyFH0Sad = (458 - 207) - (791 - 541);
        }
    }
    return (70 - 70);
}

int YZwiXxIjh4 (char H2M3GJNWa [], int ZFERvBKoC2, int IsHKlrDZJy) {
    int IanQL6Zu;
    int C6HykJQeVs0;
    int qyFH0Sad;
    C6HykJQeVs0 = (644 - 644);
    IanQL6Zu = (974 - 973);
    {
        qyFH0Sad = (812 - 178) - (1378 - 745);
        for (; (324 - 324) <= qyFH0Sad;) {
            if (!('(' != H2M3GJNWa[qyFH0Sad])) {
                C6HykJQeVs0 = C6HykJQeVs0 +(19 - 18);
            }
            else {
                if (!(')' != H2M3GJNWa[qyFH0Sad])) {
                    IanQL6Zu = IanQL6Zu +(41 - 40);
                }
            }
            if (!(IanQL6Zu != C6HykJQeVs0)) {
                return (56 - 55);
            }
            qyFH0Sad = (1480 - 807) - (952 - 280);
        }
    }
    return (872 - 872);
}

int main () {
    int qyFH0Sad;
    int t6FyYPhr5tOJ;
    scanf ("%d", &t6FyYPhr5tOJ);
    getchar ();
    {
        qyFH0Sad = (1541 - 639) - (1867 - 965);
        for (; qyFH0Sad < t6FyYPhr5tOJ;) {
            int IsHKlrDZJy;
            int ZFERvBKoC2;
            char H2M3GJNWa [(451 - 251)];
            IsHKlrDZJy = strlen (H2M3GJNWa);
            scanf ("%s", H2M3GJNWa);
            {
                ZFERvBKoC2 = (378 - 200) - (1108 - 930);
                for (; IsHKlrDZJy > ZFERvBKoC2;) {
                    if (!('(' != H2M3GJNWa[ZFERvBKoC2])) {
                        if (!FAiZWfvQDRl(H2M3GJNWa, ZFERvBKoC2, IsHKlrDZJy)) {
                            putchar ('$');
                        }
                        else
                            ;
                    }
                    else {
                        if (!(')' != H2M3GJNWa[ZFERvBKoC2])) {
                            if (!YZwiXxIjh4(H2M3GJNWa, ZFERvBKoC2, IsHKlrDZJy)) {
                                putchar ('?');
                            }
                            else
                                putchar (' ');
                        }
                        else {
                            putchar (' ');
                        }
                    }
                    ZFERvBKoC2 = (1181 - 382) - (1242 - 444);
                }
            }
            getchar ();
            qyFH0Sad = (1573 - 975) - (1517 - 920);
            printf (H2M3GJNWa);
        }
    }
    return (642 - 642);
}

