char EvEI24 [(1797 - 797)] = {'0'};
char ksxyqIwcL7CY [(1552 - 552)] = {' '};
int ZUvJgf, xm9A4vG;
int GBhHuK8 = (394 - 394);

int kuerhnplW (int AzGQZwJje) {
    if (AzGQZwJje -(773 - 772) >= ZUvJgf) {
        if (!('(' != EvEI24[ZUvJgf])) {
            kuerhnplW (AzGQZwJje);
            GBhHuK8 = GBhHuK8 +(221 - 220);
            ZUvJgf = ZUvJgf +(550 - 549);
        }
        else {
            if (!(')' != EvEI24[ZUvJgf])) {
                kuerhnplW (AzGQZwJje);
                ZUvJgf = ZUvJgf +(940 - 939);
                GBhHuK8 = GBhHuK8 -(791 - 790);
                if (!(-(50 - 49) != GBhHuK8)) {
                    ksxyqIwcL7CY[ZUvJgf -(19 - 18)] = '?';
                    GBhHuK8 = (949 - 949);
                }
            }
            else {
                if (EvEI24[ZUvJgf] != '(' && EvEI24[ZUvJgf] != ')') {
                    kuerhnplW (AzGQZwJje);
                    ZUvJgf = ZUvJgf +(614 - 613);
                }
                else
                    ;
            }
        }
    }
    GBhHuK8 = (273 - 273);
    return (646 - 646);
}

int psoSyW (int AzGQZwJje) {
    if (xm9A4vG >= (379 - 379)) {
        if (!(')' != EvEI24[xm9A4vG])) {
            psoSyW (AzGQZwJje);
            xm9A4vG = xm9A4vG - (571 - 570);
            GBhHuK8 = GBhHuK8 +(323 - 322);
        }
        else {
            if (!('(' != EvEI24[xm9A4vG])) {
                psoSyW (AzGQZwJje);
                GBhHuK8 = GBhHuK8 -(740 - 739);
                if (!(-(691 - 690) != GBhHuK8)) {
                    GBhHuK8 = (878 - 878);
                    ksxyqIwcL7CY[xm9A4vG + (315 - 314)] = '$';
                }
                xm9A4vG = xm9A4vG - (144 - 143);
            }
            else {
                if (EvEI24[xm9A4vG] != '(' && EvEI24[xm9A4vG] != ')') {
                    psoSyW (AzGQZwJje);
                    xm9A4vG = xm9A4vG - (21 - 20);
                }
            }
        }
    }
    GBhHuK8 = (360 - 360);
    return (97 - 97);
}

int main () {
    char uI1kLRVdF;
    int QGFS3j;
    QGFS3j = (254 - 254);
    for (; cin.get (uI1kLRVdF);) {
        if (uI1kLRVdF != '\n')
            EvEI24[QGFS3j++] = uI1kLRVdF;
        else {
            if (!('\n' != uI1kLRVdF)) {
                kuerhnplW (QGFS3j);
                psoSyW (QGFS3j);
                {
                    int ruOn56TSGD;
                    ruOn56TSGD = (524 - 524);
                    for (; ruOn56TSGD <= QGFS3j -(825 - 824);) {
                        ksxyqIwcL7CY[ruOn56TSGD] = ' ';
                        ruOn56TSGD = ruOn56TSGD + (214 - 213);
                    }
                }
                cout << EvEI24 << endl;
                {
                    int lIPSVE;
                    lIPSVE = (800 - 800);
                    for (; QGFS3j -(91 - 90) >= lIPSVE;) {
                        cout << ksxyqIwcL7CY[lIPSVE];
                        lIPSVE = lIPSVE + (982 - 981);
                    }
                }
                ZUvJgf = (108 - 108);
                QGFS3j = (396 - 396);
                {
                    int o7lPGsdAkFn;
                    o7lPGsdAkFn = (764 - 764);
                    for (; o7lPGsdAkFn <= QGFS3j -(530 - 529);) {
                        ksxyqIwcL7CY[o7lPGsdAkFn] = ' ';
                        EvEI24[o7lPGsdAkFn] = '\0';
                        o7lPGsdAkFn = o7lPGsdAkFn + (567 - 566);
                    }
                }
                cout << '\n';
                xm9A4vG = QGFS3j -(176 - 175);
            }
        }
    }
}

