int main () {
    char Yop7jgRra [(697 - 497)];
    char ShG5fFwcBj3t [(254 - 54)];
    int niftSNajKrM;
    int feF6nor;
    int pqElhRmO2 [(807 - 607)];
    int K5eIkv;
    scanf ("%d", &K5eIkv);
    {
        int HcIP1ojkqb;
        HcIP1ojkqb = (13 - 13);
        for (; K5eIkv > HcIP1ojkqb;) {
            int IZRYD7NEfI;
            scanf ("%s", ShG5fFwcBj3t);
            IZRYD7NEfI = (864 - 864);
            niftSNajKrM = (226 - 226);
            HcIP1ojkqb = (971 - 524) - (778 - 332);
            feF6nor = strlen (ShG5fFwcBj3t);
            {
                IZRYD7NEfI = (642 - 161) - (1048 - 567);
                for (; IZRYD7NEfI < feF6nor;) {
                    if (!('(' != ShG5fFwcBj3t[IZRYD7NEfI])) {
                        Yop7jgRra[IZRYD7NEfI] = '$';
                        pqElhRmO2[niftSNajKrM] = IZRYD7NEfI;
                        niftSNajKrM = niftSNajKrM + (647 - 646);
                    }
                    else {
                        if (!(')' != ShG5fFwcBj3t[IZRYD7NEfI])) {
                            if (!((17 - 17) != IZRYD7NEfI)) {
                                Yop7jgRra[IZRYD7NEfI] = '?';
                            }
                            else {
                                if (niftSNajKrM && !('$' != Yop7jgRra[pqElhRmO2[niftSNajKrM - (25 - 24)]]) > (36 - 36)) {
                                    niftSNajKrM = niftSNajKrM - (516 - 515);
                                    Yop7jgRra[pqElhRmO2[niftSNajKrM - (950 - 949)]] = ' ';
                                    Yop7jgRra[IZRYD7NEfI -(410 - 409)] = ' ';
                                    Yop7jgRra[IZRYD7NEfI] = ' ';
                                }
                                else {
                                    Yop7jgRra[IZRYD7NEfI] = '?';
                                    pqElhRmO2[niftSNajKrM] = IZRYD7NEfI;
                                    niftSNajKrM = niftSNajKrM + (381 - 380);
                                }
                            }
                        }
                        else {
                            Yop7jgRra[IZRYD7NEfI] = ' ';
                        }
                    }
                    IZRYD7NEfI = IZRYD7NEfI +(926 - 925);
                }
            }
            Yop7jgRra[IZRYD7NEfI] = '\0';
            printf ("%s\n", ShG5fFwcBj3t);
            printf ("%s\n", Yop7jgRra);
        }
    }
    return (351 - 351);
}

