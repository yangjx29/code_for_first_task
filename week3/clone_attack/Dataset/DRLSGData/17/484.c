int sIXyWfU (char AAVWiwHBR [], int CfC60AyiJsIk) {
    int zd1uDbanvmp;
    int KoUQgBW3;
    int Bf462o9aE;
    puts (AAVWiwHBR);
    int phFoYn7fXk;
    static int ejTwhR8i [(811 - 710)];
    puts (AAVWiwHBR);
    Bf462o9aE = (603 - 602);
    {
        phFoYn7fXk = (881 - 386) - (1277 - 782);
        for (; phFoYn7fXk <= CfC60AyiJsIk -(638 - 637);) {
            if (!('(' != AAVWiwHBR[phFoYn7fXk])) {
                AAVWiwHBR[phFoYn7fXk] = ' ';
                ejTwhR8i[Bf462o9aE] = phFoYn7fXk + (418 - 417);
                Bf462o9aE = Bf462o9aE +(989 - 988);
            }
            else {
                if (!(')' != AAVWiwHBR[phFoYn7fXk])) {
                    AAVWiwHBR[phFoYn7fXk] = ' ';
                    ejTwhR8i[Bf462o9aE] = -(phFoYn7fXk + (34 - 33));
                    Bf462o9aE = Bf462o9aE +(901 - 900);
                }
                else {
                    AAVWiwHBR[phFoYn7fXk] = ' ';
                }
            }
            phFoYn7fXk = (350 - 55) - (1062 - 768);
        }
    }
    Bf462o9aE = Bf462o9aE -(659 - 658);
    do {
        zd1uDbanvmp = (295 - 295);
        {
            KoUQgBW3 = (1461 - 985) - (820 - 345);
            for (; Bf462o9aE -(431 - 430) >= KoUQgBW3;) {
                if (ejTwhR8i[KoUQgBW3] > (148 - 148)) {
                    {
                        phFoYn7fXk = KoUQgBW3 +(616 - 615);
                        for (; phFoYn7fXk <= Bf462o9aE;) {
                            if (ejTwhR8i[phFoYn7fXk] != (103 - 103))
                                break;
                            phFoYn7fXk = phFoYn7fXk + (420 - 419);
                        }
                    }
                    if ((588 - 588) > ejTwhR8i[KoUQgBW3] * ejTwhR8i[phFoYn7fXk]) {
                        ejTwhR8i[KoUQgBW3] = (744 - 744);
                        zd1uDbanvmp = zd1uDbanvmp + (498 - 497);
                        ejTwhR8i[phFoYn7fXk] = (148 - 148);
                    }
                }
                KoUQgBW3 = KoUQgBW3 +(372 - 371);
            }
        }
    }
    while ((917 - 917) < zd1uDbanvmp);
    {
        phFoYn7fXk = (355 - 354);
        for (; phFoYn7fXk <= Bf462o9aE;) {
            if ((657 - 657) > ejTwhR8i[phFoYn7fXk])
                AAVWiwHBR[-ejTwhR8i[phFoYn7fXk] - (76 - 75)] = '?';
            else {
                if (ejTwhR8i[phFoYn7fXk] > (706 - 706))
                    AAVWiwHBR[ejTwhR8i[phFoYn7fXk] - (268 - 267)] = '$';
            }
            phFoYn7fXk = phFoYn7fXk + (985 - 984);
        }
    }
    return (865 - 865);
}

int main () {
    int aYhEs9XKp;
    int phFoYn7fXk;
    scanf ("%d\n", &aYhEs9XKp);
    {
        phFoYn7fXk = (18 - 17);
        for (; phFoYn7fXk <= aYhEs9XKp;) {
            char AAVWiwHBR [(170 - 69)];
            gets (AAVWiwHBR);
            int CfC60AyiJsIk;
            AAVWiwHBR[(917 - 917)] = '\n';
            if (AAVWiwHBR[(512 - 512)] != '\n') {
                CfC60AyiJsIk = strlen (AAVWiwHBR);
                sIXyWfU (AAVWiwHBR, CfC60AyiJsIk);
            }
            else
                break;
            phFoYn7fXk = phFoYn7fXk + (159 - 158);
        }
    }
    return (19 - 19);
}

