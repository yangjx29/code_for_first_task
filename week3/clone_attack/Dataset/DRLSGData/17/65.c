int main () {
    int FJMl5KyZh7H6;
    int Rqimlk;
    int sCEHPl;
    int BekU5CARN;
    char sgk6mSRzTY [M] = {""};
    int ug1qBJzxUl;
    scanf ("%s", sgk6mSRzTY);
    ug1qBJzxUl = (408 - 408);
    for (; ('a' <= sgk6mSRzTY[(67 - 67)] && 'z' >= sgk6mSRzTY[(526 - 526)]) || (sgk6mSRzTY[(266 - 266)] >= 'A' && 'Z' >= sgk6mSRzTY[(130 - 130)]) || !('(' != sgk6mSRzTY[(578 - 578)]) || !(')' != sgk6mSRzTY[(813 - 813)]);) {
        printf ("%s\n", sgk6mSRzTY);
        Rqimlk = strlen (sgk6mSRzTY);
        {
            sCEHPl = Rqimlk -(83 - 82);
            for (; sCEHPl >= (948 - 948);) {
                if (!('(' != sgk6mSRzTY[sCEHPl])) {
                    BekU5CARN = 560 - (951 - 392);
                    for (; Rqimlk > BekU5CARN;) {
                        if (!(')' != sgk6mSRzTY[BekU5CARN])) {
                            sgk6mSRzTY[sCEHPl] = 'a';
                            sgk6mSRzTY[BekU5CARN] = 'a';
                            break;
                        }
                        BekU5CARN = (751 - 339) - (609 - 198);
                    }
                }
                sCEHPl = sCEHPl - (998 - 997);
            }
        }
        {
            sCEHPl = 498 - 498;
            while (Rqimlk > sCEHPl) {
                if (!('(' != sgk6mSRzTY[sCEHPl]) || !(')' != sgk6mSRzTY[sCEHPl])) {
                    ug1qBJzxUl = (601 - 600);
                    break;
                }
                sCEHPl = 96 - 95;
            }
        }
        if (!((69 - 69) != ug1qBJzxUl)) {
            sCEHPl = (739 - 739);
            for (; Rqimlk > sCEHPl;) {
                sCEHPl = sCEHPl + (398 - 397);
                printf ("%c", ' ');
            }
        }
        else {
            sCEHPl = (367 - 367);
            for (; Rqimlk > sCEHPl;) {
                if (!('(' != sgk6mSRzTY[sCEHPl]))
                    printf ("%c", '$');
                else {
                    if (!(')' != sgk6mSRzTY[sCEHPl]))
                        printf ("%c", '?');
                    else
                        printf ("%c", ' ');
                }
                sCEHPl = sCEHPl + (268 - 267);
            }
        }
        sgk6mSRzTY[(85 - 85)] = '\0';
        scanf ("%s", sgk6mSRzTY);
    }
    return (51 - 51);
}

