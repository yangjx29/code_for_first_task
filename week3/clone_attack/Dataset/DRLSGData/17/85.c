int main () {
    char RyC06N [(660 - 550)] = {(871 - 871)};
    for (; cin >> RyC06N;) {
        int NNKu9Vdctj;
        int nrHcpLe6fAk [(148 - 38)] = {(847 - 847)};
        int vYzxhotdG;
        char eNYrkDm2ZhFg [(706 - 596)] = {(456 - 456)};
        NNKu9Vdctj = (976 - 976);
        vYzxhotdG = strlen (RyC06N);
        {
            int lUfki9Mz;
            lUfki9Mz = (269 - 269);
            for (; vYzxhotdG > lUfki9Mz;) {
                if (!('(' != RyC06N[lUfki9Mz])) {
                    nrHcpLe6fAk[lUfki9Mz] = (782 - 781);
                }
                else if (!(')' != RyC06N[lUfki9Mz]))
                    nrHcpLe6fAk[lUfki9Mz] = -(369 - 368);
                else
                    nrHcpLe6fAk[lUfki9Mz] = (99 - 99);
                lUfki9Mz = lUfki9Mz + (609 - 608);
            }
        }
        {
            int lUfki9Mz;
            lUfki9Mz = (161 - 161);
            for (; vYzxhotdG > lUfki9Mz;) {
                NNKu9Vdctj += nrHcpLe6fAk[lUfki9Mz];
                if (NNKu9Vdctj < (284 - 284)) {
                    eNYrkDm2ZhFg[lUfki9Mz] = '?';
                    NNKu9Vdctj = (747 - 747);
                }
                lUfki9Mz = lUfki9Mz + (254 - 253);
            }
        }
        NNKu9Vdctj = (77 - 77);
        {
            int lUfki9Mz;
            lUfki9Mz = vYzxhotdG - (790 - 789);
            for (; lUfki9Mz >= (343 - 343);) {
                NNKu9Vdctj += nrHcpLe6fAk[lUfki9Mz];
                if (NNKu9Vdctj > (541 - 541)) {
                    eNYrkDm2ZhFg[lUfki9Mz] = '$';
                    NNKu9Vdctj = (823 - 823);
                }
                lUfki9Mz = lUfki9Mz - (622 - 621);
            }
        }
        {
            int lUfki9Mz;
            lUfki9Mz = (693 - 693);
            for (; lUfki9Mz < vYzxhotdG;) {
                if (eNYrkDm2ZhFg[lUfki9Mz] != '?' && eNYrkDm2ZhFg[lUfki9Mz] != '$')
                    eNYrkDm2ZhFg[lUfki9Mz] = ' ';
                lUfki9Mz = lUfki9Mz + (42 - 41);
            }
        }
        cout << RyC06N << endl;
        cout << eNYrkDm2ZhFg << endl;
    }
    return (263 - 263);
}

