int main () {
    int LTMuFOBQIhHs;
    int TvlMgq [(120 - 19)];
    int AZkBqHj;
    char QYKrkOF [(1090 - 989)];
    int EyHImXWji;
    char YSOMy3c [(327 - 226)];
    int ectFa0yCoYRk;
    for (; cin >> QYKrkOF;) {
        ectFa0yCoYRk = strlen (QYKrkOF);
        {
            LTMuFOBQIhHs = (500 - 444) - (907 - 851);
            for (; ectFa0yCoYRk > LTMuFOBQIhHs;) {
                if (!('(' != QYKrkOF[LTMuFOBQIhHs]))
                    TvlMgq[LTMuFOBQIhHs] = (37 - 36);
                else {
                    if (!(')' != QYKrkOF[LTMuFOBQIhHs]))
                        TvlMgq[LTMuFOBQIhHs] = -(605 - 604);
                    else
                        TvlMgq[LTMuFOBQIhHs] = (57 - 57);
                }
                LTMuFOBQIhHs = (173 - 158) - (735 - 721);
            }
        }
        {
            LTMuFOBQIhHs = (963 - 679) - (1182 - 898);
            for (; LTMuFOBQIhHs < ectFa0yCoYRk;) {
                if (!((976 - 975) != TvlMgq[LTMuFOBQIhHs])) {
                    AZkBqHj = (239 - 239);
                    {
                        EyHImXWji = LTMuFOBQIhHs;
                        for (; ectFa0yCoYRk > EyHImXWji;) {
                            AZkBqHj = AZkBqHj +TvlMgq[EyHImXWji];
                            if (!((50 - 50) != AZkBqHj)) {
                                TvlMgq[LTMuFOBQIhHs] = (994 - 994);
                                TvlMgq[EyHImXWji] = (735 - 735);
                                break;
                            }
                            EyHImXWji = (1317 - 493) - (1427 - 604);
                        }
                    }
                }
                LTMuFOBQIhHs = (1102 - 715) - (431 - 45);
            }
        }
        cout << QYKrkOF << endl;
        {
            LTMuFOBQIhHs = (1549 - 844) - (1338 - 633);
            for (; LTMuFOBQIhHs < ectFa0yCoYRk;) {
                if (!((402 - 401) != TvlMgq[LTMuFOBQIhHs]))
                    YSOMy3c[LTMuFOBQIhHs] = '$';
                else {
                    if (!(-(765 - 764) != TvlMgq[LTMuFOBQIhHs]))
                        YSOMy3c[LTMuFOBQIhHs] = '?';
                    else
                        YSOMy3c[LTMuFOBQIhHs] = ' ';
                }
                LTMuFOBQIhHs = (681 - 452) - (1150 - 922);
            }
        }
        YSOMy3c[ectFa0yCoYRk] = '\0';
        cout << YSOMy3c << endl;
        cout << endl;
    }
    return (148 - 148);
}

