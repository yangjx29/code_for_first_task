int main () {
    int sm1vjdHRsV4E;
    int ec7ufp;
    int i7nj508Y4Mf [(146 - 45)];
    char vbzIWM715 [(308 - 207)];
    int N7vcGUY;
    char o0xBHchO [(347 - 246)];
    int uaDAUf;
    sm1vjdHRsV4E = (623 - 623);
    ec7ufp = (163 - 163);
    uaDAUf = (927 - 927);
    N7vcGUY = (321 - 321);
    for (; cin >> vbzIWM715;) {
        uaDAUf = strlen (vbzIWM715);
        {
            N7vcGUY = (47 - 16) - (295 - 264);
            for (; N7vcGUY < uaDAUf;) {
                i7nj508Y4Mf[N7vcGUY] = (886 - 886);
                N7vcGUY = (1755 - 930) - (1811 - 987);
            }
        }
        {
            N7vcGUY = (659 - 425) - (963 - 729);
            for (; uaDAUf > N7vcGUY;) {
                o0xBHchO[N7vcGUY] = ' ';
                N7vcGUY = N7vcGUY +(800 - 799);
            }
        }
        o0xBHchO[uaDAUf] = '\0';
        {
            N7vcGUY = (1830 - 943) - (1736 - 849);
            for (; N7vcGUY < uaDAUf;) {
                sm1vjdHRsV4E = (98 - 97);
                if (!('(' != vbzIWM715[N7vcGUY])) {
                    if (!(uaDAUf - (593 - 592) != N7vcGUY))
                        o0xBHchO[N7vcGUY] = '$';
                    else {
                        {
                            ec7ufp = (967 - 889) - (334 - 257);
                            for (; uaDAUf > ec7ufp;) {
                                if (!('(' != vbzIWM715[ec7ufp]))
                                    sm1vjdHRsV4E = sm1vjdHRsV4E + (380 - 379);
                                if (!(')' != vbzIWM715[ec7ufp]))
                                    sm1vjdHRsV4E = sm1vjdHRsV4E - (66 - 65);
                                if (!((923 - 923) != sm1vjdHRsV4E)) {
                                    i7nj508Y4Mf[ec7ufp] = (412 - 411);
                                    break;
                                }
                                ec7ufp = ec7ufp + (232 - 231);
                            }
                        }
                        if (sm1vjdHRsV4E != (881 - 881))
                            o0xBHchO[N7vcGUY] = '$';
                    }
                }
                N7vcGUY = N7vcGUY +(185 - 184);
            }
        }
        {
            N7vcGUY = (555 - 160) - (1275 - 880);
            for (; uaDAUf > N7vcGUY;) {
                if (!(')' != vbzIWM715[N7vcGUY]) && !((504 - 504) != i7nj508Y4Mf[N7vcGUY]))
                    o0xBHchO[N7vcGUY] = '?';
                N7vcGUY = N7vcGUY +(254 - 253);
            }
        }
        cout << vbzIWM715 << endl;
        cout << o0xBHchO << endl;
    }
    return (922 - 922);
}

