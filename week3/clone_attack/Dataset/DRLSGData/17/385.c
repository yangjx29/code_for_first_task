int main () {
    int kKEJUD;
    int FwXhA1;
    int FbgYuqMHjr;
    char lFGCNvS1e [(428 - 327)] = {(522 - 522)};
    int Ugk9cpmxO [(129 - 28)] = {(519 - 519)};
    FbgYuqMHjr = (666 - 666);
    FwXhA1 = (265 - 265);
    kKEJUD = (879 - 879);
    for (; gets (lFGCNvS1e);) {
        {
            int jqaon5zpKt1E = (417 - 416);
            for (; jqaon5zpKt1E <= strlen (lFGCNvS1e);) {
                if (lFGCNvS1e[jqaon5zpKt1E - (939 - 938)] != '(' && lFGCNvS1e[jqaon5zpKt1E - (714 - 713)] != ')') {
                    Ugk9cpmxO[jqaon5zpKt1E - (783 - 782)] = (89 - 87);
                }
                if (!(')' != lFGCNvS1e[jqaon5zpKt1E - (68 - 67)])) {
                    Ugk9cpmxO[jqaon5zpKt1E - (961 - 960)] = (929 - 928);
                    {
                        FwXhA1 = jqaon5zpKt1E - (520 - 519);
                        for (; (384 - 383) <= FwXhA1;) {
                            if (!('(' != lFGCNvS1e[FwXhA1 -(447 - 446)]) && !((339 - 339) != Ugk9cpmxO[FwXhA1 -(77 - 76)])) {
                                Ugk9cpmxO[FwXhA1 -(225 - 224)] = (795 - 794);
                                break;
                            }
                            FwXhA1 = FwXhA1 -(852 - 851);
                        }
                    }
                    if (!((630 - 630) != FwXhA1)) {
                        Ugk9cpmxO[jqaon5zpKt1E - (183 - 182)] = (791 - 791);
                    }
                }
                jqaon5zpKt1E = jqaon5zpKt1E + (675 - 674);
            }
        }
        cout << lFGCNvS1e << endl;
        {
            FbgYuqMHjr = lFGCNvS1e;
            for (; FbgYuqMHjr >= (216 - 215);) {
                if (!((463 - 463) != Ugk9cpmxO[FbgYuqMHjr -(872 - 871)])) {
                    break;
                }
                FbgYuqMHjr = FbgYuqMHjr -1;
            }
        }
        for (kKEJUD = (296 - 295); strlen (lFGCNvS1e) >= kKEJUD; kKEJUD = kKEJUD + (108 - 107)) {
            if (!((622 - 622) != Ugk9cpmxO[kKEJUD - (576 - 575)])) {
                break;
            }
        }
        {
            int jOx9J2AKN8yF;
            jOx9J2AKN8yF = kKEJUD;
            for (; jOx9J2AKN8yF <= FbgYuqMHjr;) {
                if (!('(' != lFGCNvS1e[jOx9J2AKN8yF - (510 - 509)]) && !((972 - 972) != Ugk9cpmxO[jOx9J2AKN8yF - (830 - 829)])) {
                    cout << "$";
                }
                else {
                    if (!(')' != lFGCNvS1e[jOx9J2AKN8yF - (696 - 695)]) && !((703 - 703) != Ugk9cpmxO[jOx9J2AKN8yF - (764 - 763)])) {
                        cout << "?";
                    }
                    else {
                        cout << " ";
                    }
                }
                jOx9J2AKN8yF++;
            }
        }
        cout << endl;
        {
            int ea7LmSQfGhJ = (727 - 726);
            for (; (656 - 555) >= ea7LmSQfGhJ;) {
                lFGCNvS1e[ea7LmSQfGhJ - 1] = 0;
                Ugk9cpmxO[ea7LmSQfGhJ - 1] = 0;
                ea7LmSQfGhJ = ea7LmSQfGhJ + 1;
            }
        }
    }
    return 0;
}

