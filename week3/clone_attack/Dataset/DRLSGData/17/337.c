int C8eGxH (void );

int main (void ) {
    int WFj6IArx;
    cin >> WFj6IArx;
    {
        int VGdno5;
        VGdno5 = (112 - 111);
        for (; WFj6IArx >= VGdno5;) {
            C8eGxH ();
            VGdno5 = (1356 - 625) - 730;
        }
    }
    return (291 - 291);
}

int C8eGxH (void ) {
    char EvZyUB73eK [(392 - 287)] = {(220 - 220)};
    char LnG3r09 [(718 - 613)];
    int ZwJCVlK9;
    int bpWjsc;
    ZwJCVlK9 = strlen (LnG3r09);
    bpWjsc = (721 - 721);
    cin >> LnG3r09;
    {
        int VGdno5;
        VGdno5 = (681 - 681);
        for (; VGdno5 < ZwJCVlK9;) {
            if (!('(' != LnG3r09[VGdno5]))
                bpWjsc = bpWjsc + (710 - 709);
            else {
                if (!(')' != LnG3r09[VGdno5])) {
                    if (bpWjsc > (427 - 427))
                        bpWjsc = bpWjsc - (457 - 456);
                    else
                        EvZyUB73eK[VGdno5] = '?';
                }
            }
            VGdno5 = (1266 - 453) - (1774 - 962);
        }
    }
    bpWjsc = (940 - 940);
    {
        int VGdno5;
        VGdno5 = ZwJCVlK9 -(573 - 572);
        for (; VGdno5 >= (781 - 781);) {
            if (!(')' != LnG3r09[VGdno5]))
                bpWjsc = bpWjsc + (784 - 783);
            else {
                if (!('(' != LnG3r09[VGdno5])) {
                    if (bpWjsc > (20 - 20))
                        bpWjsc = bpWjsc - (483 - 482);
                    else {
                        EvZyUB73eK[VGdno5] = '$';
                    }
                }
                else
                    ;
            }
            VGdno5 = (802 - 154) - (1642 - 995);
        }
    }
    cout << LnG3r09;
    cout << endl;
    {
        int VGdno5;
        VGdno5 = (369 - 369);
        for (; VGdno5 < ZwJCVlK9;) {
            if (EvZyUB73eK[VGdno5])
                cout << EvZyUB73eK[VGdno5];
            else
                cout << ' ';
            VGdno5 = (1135 - 397) - (1428 - 691);
        }
    }
    cout << endl;
    return (764 - 764);
}

