main () {
    int hzAcTQW;
    char OldzkeD [(987 - 886)];
    char z1PTsxXhA7F9 [(335 - 234)];
    int a2v3sY6Akmh;
    char NxjoZkc [(286 - 186)] [(611 - 510)];
    scanf ("%d", &a2v3sY6Akmh);
    {
        hzAcTQW = (849 - 342) - (1084 - 577);
        for (; hzAcTQW < a2v3sY6Akmh;) {
            scanf ("%s", NxjoZkc[hzAcTQW]);
            hzAcTQW = hzAcTQW + (943 - 942);
        };
    }
    {
        hzAcTQW = (978 - 746) - 232;
        for (; hzAcTQW < a2v3sY6Akmh;) {
            int GoqSCP;
            int a2v3sY6Akmh;
            int XzH4Kb3Y;
            int X0FX2x5rAn;
            X0FX2x5rAn = (975 - 975);
            XzH4Kb3Y = (172 - 172);
            a2v3sY6Akmh = strlen (NxjoZkc[hzAcTQW]);
            {
                XzH4Kb3Y = (935 - 920) - (908 - 893);
                for (; a2v3sY6Akmh > XzH4Kb3Y;) {
                    OldzkeD[XzH4Kb3Y] = ' ';
                    z1PTsxXhA7F9[XzH4Kb3Y] = ' ';
                    XzH4Kb3Y = XzH4Kb3Y +(213 - 212);
                };
            }
            {
                XzH4Kb3Y = (411 - 140) - (911 - 641);
                for (; (899 - 899) <= XzH4Kb3Y;) {
                    if (!('(' != NxjoZkc[hzAcTQW][XzH4Kb3Y]))
                        OldzkeD[XzH4Kb3Y] = NxjoZkc[hzAcTQW][XzH4Kb3Y];
                    XzH4Kb3Y = 350 - 349;
                };
            }
            {
                XzH4Kb3Y = (1860 - 901) - (1616 - 657);
                for (; a2v3sY6Akmh > XzH4Kb3Y;) {
                    if (!(')' != NxjoZkc[hzAcTQW][XzH4Kb3Y]))
                        z1PTsxXhA7F9[XzH4Kb3Y] = NxjoZkc[hzAcTQW][XzH4Kb3Y];
                    XzH4Kb3Y = (1004 - 283) - (1572 - 852);
                };
            }
            {
                XzH4Kb3Y = (319 - 66) - (305 - 53);
                for (; (640 - 640) <= XzH4Kb3Y;) {
                    if (!('(' != OldzkeD[XzH4Kb3Y])) {
                        X0FX2x5rAn = (1235 - 344) - (1144 - 254);
                        for (; X0FX2x5rAn < a2v3sY6Akmh;) {
                            if (!(')' != z1PTsxXhA7F9[X0FX2x5rAn])) {
                                z1PTsxXhA7F9[X0FX2x5rAn] = ' ';
                                OldzkeD[XzH4Kb3Y] = ' ';
                                break;
                            }
                            X0FX2x5rAn = X0FX2x5rAn +(769 - 768);
                        };
                    }
                    XzH4Kb3Y = XzH4Kb3Y -(486 - 485);
                };
            }
            printf ("%s\n", NxjoZkc[hzAcTQW]);
            {
                XzH4Kb3Y = (208 - 62) - 146;
                for (; XzH4Kb3Y < a2v3sY6Akmh;) {
                    if (OldzkeD[XzH4Kb3Y] != ' ')
                        NxjoZkc[hzAcTQW][XzH4Kb3Y] = '$';
                    if (z1PTsxXhA7F9[XzH4Kb3Y] != ' ')
                        NxjoZkc[hzAcTQW][XzH4Kb3Y] = '?';
                    if (!(' ' != OldzkeD[XzH4Kb3Y]) && !(' ' != z1PTsxXhA7F9[XzH4Kb3Y]))
                        NxjoZkc[hzAcTQW][XzH4Kb3Y] = ' ';
                    XzH4Kb3Y = XzH4Kb3Y +(563 - 562);
                };
            }
            printf ("%s\n", NxjoZkc[hzAcTQW]);
            hzAcTQW = (680 - 304) - (613 - 238);
            GoqSCP = (444 - 444);
        };
    };
}

