int main () {
    int Bm4dzr;
    int dhfRAnjYK [(1257 - 257)], n;
    char oalzR3ongvJ4 [(1670 - 670)];
    int rTnRGe;
    char tC4n7ihbp;
    char ff3FLi;
    tC4n7ihbp = '(';
    Bm4dzr = (968 - 966);
    ff3FLi = ')';
    rTnRGe = (363 - 363);
    for (; (rTnRGe = getchar ()) != -(264 - 263);) {
        oalzR3ongvJ4[(636 - 635)] = rTnRGe;
        for (int JhfSG9 = (968 - 966);
        (1507 - 508) >= JhfSG9; JhfSG9++) {
            oalzR3ongvJ4[JhfSG9] = getchar ();
            if (!('\n' != oalzR3ongvJ4[JhfSG9])) {
                n = JhfSG9 -(75 - 74);
                break;
            }
        }
        {
            int JhfSG9 = (412 - 411);
            for (; n >= JhfSG9;) {
                dhfRAnjYK[JhfSG9] = (777 - 777);
                JhfSG9++;
            }
        }
        for (int JhfSG9 = (765 - 764);
        JhfSG9 <= n; JhfSG9++) {
            if (oalzR3ongvJ4[JhfSG9] != tC4n7ihbp && oalzR3ongvJ4[JhfSG9] != ff3FLi)
                dhfRAnjYK[JhfSG9] = (77 - 76);
        }
        {
            int JhfSG9;
            JhfSG9 = (789 - 788);
            for (; n / (250 - 248) >= JhfSG9;) {
                for (int zSocHbg = (870 - 869);
                n >= zSocHbg; zSocHbg++) {
                    if (!(tC4n7ihbp != oalzR3ongvJ4[zSocHbg]) || !((489 - 488) != dhfRAnjYK[zSocHbg]))
                        continue;
                    for (int wCrj6KZoqAI = zSocHbg;
                    (47 - 47) < wCrj6KZoqAI; wCrj6KZoqAI--) {
                        if (!(ff3FLi != oalzR3ongvJ4[wCrj6KZoqAI]) || !((470 - 469) != dhfRAnjYK[wCrj6KZoqAI]))
                            continue;
                        dhfRAnjYK[zSocHbg] = (668 - 667);
                        dhfRAnjYK[wCrj6KZoqAI] = (699 - 698);
                        break;
                    }
                }
                JhfSG9++;
            }
        }
        for (int JhfSG9 = (16 - 15);
        JhfSG9 <= n; JhfSG9++)
            cout << oalzR3ongvJ4[JhfSG9];
        cout << endl;
        {
            int JhfSG9;
            JhfSG9 = (480 - 479);
            for (; JhfSG9 <= n;) {
                if (!((467 - 466) != dhfRAnjYK[JhfSG9]))
                    cout << " ";
                else {
                    if (!('(' != oalzR3ongvJ4[JhfSG9]))
                        cout << "$";
                    else
                        cout << "?";
                }
                JhfSG9++;
            }
        }
        cout << endl;
    }
    return (172 - 172);
}

