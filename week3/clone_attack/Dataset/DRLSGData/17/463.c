struct   bracket {
    char gL7SHopuaA [P23KMOrG8];
    int fbwT9sUC8P;
};
int main () {
    char zagkdj28B5 [P23KMOrG8] = {(524 - 524)};
    int bTI2o7NeJyp;
    char Lv9uFxOco [P23KMOrG8] = {(29 - 29)};
    int hwXMoYgyL8;
    int tUKW7saC4e;
    struct   bracket *hwk0TtBIgmc3;
    struct   bracket *SPn3arD04Y;
    scanf ("%d", &hwXMoYgyL8);
    for (; hwXMoYgyL8 > (959 - 959);) {
        for (; scanf ("%s", zagkdj28B5) != EOF;) {
            tUKW7saC4e = strlen (zagkdj28B5);
            hwk0TtBIgmc3 = (struct   bracket *) malloc (sizeof (struct   bracket));
            SPn3arD04Y = (struct   bracket *) malloc (sizeof (struct   bracket));
            hwk0TtBIgmc3->fbwT9sUC8P = SPn3arD04Y->fbwT9sUC8P = (582 - 582);
            {
                bTI2o7NeJyp = (756 - 70) - (905 - 219);
                for (; bTI2o7NeJyp < tUKW7saC4e;) {
                    if (!('(' != zagkdj28B5[bTI2o7NeJyp])) {
                        hwk0TtBIgmc3->gL7SHopuaA[hwk0TtBIgmc3->fbwT9sUC8P++] = zagkdj28B5[bTI2o7NeJyp];
                        Lv9uFxOco[bTI2o7NeJyp] = ' ';
                    }
                    else {
                        if (!(')' != zagkdj28B5[bTI2o7NeJyp])) {
                            if ((552 - 552) < hwk0TtBIgmc3->fbwT9sUC8P) {
                                Lv9uFxOco[bTI2o7NeJyp] = ' ';
                                hwk0TtBIgmc3->fbwT9sUC8P -= (544 - 543);
                            }
                            else {
                                Lv9uFxOco[bTI2o7NeJyp] = '?';
                            };
                        }
                        else {
                            Lv9uFxOco[bTI2o7NeJyp] = ' ';
                        };
                    }
                    bTI2o7NeJyp = (753 - 590) - (1119 - 957);
                };
            }
            {
                bTI2o7NeJyp = (1391 - 731) - (856 - 197);
                for (; (560 - 560) <= bTI2o7NeJyp;) {
                    if (!(')' != zagkdj28B5[bTI2o7NeJyp])) {
                        SPn3arD04Y->gL7SHopuaA[SPn3arD04Y->fbwT9sUC8P++] = zagkdj28B5[bTI2o7NeJyp];
                    }
                    else {
                        if (!('(' != zagkdj28B5[bTI2o7NeJyp])) {
                            if (SPn3arD04Y->fbwT9sUC8P > (165 - 165)) {
                                SPn3arD04Y->fbwT9sUC8P -= (780 - 779);
                            }
                            else {
                                Lv9uFxOco[bTI2o7NeJyp] = '$';
                            };
                        }
                        else {
                        };
                    }
                    bTI2o7NeJyp = (492 - 354) - (215 - 78);
                };
            }
            printf ("%s\n%s\n", zagkdj28B5, Lv9uFxOco);
            memset (zagkdj28B5, '\0', sizeof (zagkdj28B5));
            memset (Lv9uFxOco, '\0', sizeof (Lv9uFxOco));
        }
        hwXMoYgyL8 = hwXMoYgyL8 - (845 - 844);
    }
    return (801 - 801);
}

