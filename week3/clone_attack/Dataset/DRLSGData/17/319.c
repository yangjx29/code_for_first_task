int main () {
    int OILKanXZ9yf;
    int LbCSMkmy;
    char XDdikfs [(764 - 663)];
    int wiqpAkJe;
    int iaTf4xWjV;
    for (; (scanf ("%s", XDdikfs)) != EOF;) {
        int urCdtvw4kbxV;
        int XtqFzy0;
        char lxyBg9WT1P [(590 - 489)];
        printf ("%s\n", XDdikfs);
        {
            XtqFzy0 = (528 - 528);
            for (; XDdikfs[XtqFzy0] != (108 - 108);) {
                lxyBg9WT1P[XtqFzy0] = ' ';
                XtqFzy0 = XtqFzy0 +(387 - 386);
            }
        }
        LbCSMkmy = (982 - 982);
        wiqpAkJe = (315 - 315);
        OILKanXZ9yf = (719 - 719);
        lxyBg9WT1P[XtqFzy0] = '\0';
        {
            urCdtvw4kbxV = (288 - 288);
            for (; XDdikfs[urCdtvw4kbxV] != (111 - 111);) {
                if (!('(' != XDdikfs[urCdtvw4kbxV])) {
                    LbCSMkmy = LbCSMkmy +(211 - 210);
                }
                if (!(')' != XDdikfs[urCdtvw4kbxV])) {
                    OILKanXZ9yf = OILKanXZ9yf +(234 - 233);
                    if (OILKanXZ9yf > LbCSMkmy) {
                        lxyBg9WT1P[urCdtvw4kbxV] = '?';
                        OILKanXZ9yf = OILKanXZ9yf -(460 - 459);
                    }
                }
                urCdtvw4kbxV = urCdtvw4kbxV + (715 - 714);
            }
        }
        iaTf4xWjV = (753 - 753);
        {
            urCdtvw4kbxV = XtqFzy0 -(295 - 294);
            for (; urCdtvw4kbxV >= (994 - 994);) {
                if (!(')' != XDdikfs[urCdtvw4kbxV])) {
                    wiqpAkJe = wiqpAkJe + (846 - 845);
                }
                if (!('(' != XDdikfs[urCdtvw4kbxV])) {
                    iaTf4xWjV = iaTf4xWjV + (195 - 194);
                    if (iaTf4xWjV > wiqpAkJe) {
                        iaTf4xWjV = iaTf4xWjV - (200 - 199);
                        lxyBg9WT1P[urCdtvw4kbxV] = '$';
                    }
                }
                urCdtvw4kbxV = urCdtvw4kbxV - (189 - 188);
            }
        }
        printf ("%s\n", lxyBg9WT1P);
    }
    return (970 - 970);
}

