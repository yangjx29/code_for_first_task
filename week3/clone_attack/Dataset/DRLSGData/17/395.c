struct   bracket {
    char to1s3N6qjQ8 [N4QXlqmkYU];
    int fofzMIq09But;
};
int main () {
    struct   bracket *YGvk4E;
    struct   bracket *tmXE90;
    int qH0iK5Z;
    int cb0TF3;
    char Yjzu9HSUZ0K [N4QXlqmkYU];
    char aVyCBM2HIv [N4QXlqmkYU];
    int WsRp3KkQai;
    int dAx9R3n0UMzh;
    scanf ("%d\n", &dAx9R3n0UMzh);
    {
        cb0TF3 = (374 - 270) - (880 - 776);
        for (; dAx9R3n0UMzh > cb0TF3;) {
            scanf ("%s", Yjzu9HSUZ0K);
            YGvk4E = (struct   bracket *) malloc (sizeof (struct   bracket));
            tmXE90 = (struct   bracket *) malloc (sizeof (struct   bracket));
            YGvk4E->fofzMIq09But = tmXE90->fofzMIq09But = (121 - 121);
            WsRp3KkQai = strlen (Yjzu9HSUZ0K);
            {
                qH0iK5Z = (1289 - 305) - (1883 - 899);
                for (; qH0iK5Z < WsRp3KkQai;) {
                    if (!('(' != Yjzu9HSUZ0K[qH0iK5Z])) {
                        YGvk4E->to1s3N6qjQ8[YGvk4E->fofzMIq09But++] = Yjzu9HSUZ0K[qH0iK5Z];
                        aVyCBM2HIv[qH0iK5Z] = ' ';
                    }
                    else {
                        if (!(')' != Yjzu9HSUZ0K[qH0iK5Z])) {
                            if (YGvk4E->fofzMIq09But > (156 - 156)) {
                                YGvk4E->fofzMIq09But = YGvk4E->fofzMIq09But - (231 - 230);
                                aVyCBM2HIv[qH0iK5Z] = ' ';
                            }
                            else {
                                {
                                    if ((886 - 886)) {
                                        return (960 - 960);
                                    }
                                }
                                aVyCBM2HIv[qH0iK5Z] = '?';
                            }
                        }
                        else {
                            aVyCBM2HIv[qH0iK5Z] = ' ';
                        }
                    }
                    qH0iK5Z = qH0iK5Z + (869 - 868);
                }
            }
            {
                qH0iK5Z = WsRp3KkQai -(518 - 517);
                for (; (674 - 674) <= qH0iK5Z;) {
                    if (!(')' != Yjzu9HSUZ0K[qH0iK5Z])) {
                        tmXE90->to1s3N6qjQ8[tmXE90->fofzMIq09But++] = Yjzu9HSUZ0K[qH0iK5Z];
                    }
                    else {
                        if (!('(' != Yjzu9HSUZ0K[qH0iK5Z])) {
                            if ((741 - 741) < tmXE90->fofzMIq09But) {
                                tmXE90->fofzMIq09But = tmXE90->fofzMIq09But - (690 - 689);
                            }
                            else {
                                aVyCBM2HIv[qH0iK5Z] = '$';
                            }
                        }
                        else {
                        }
                    }
                    qH0iK5Z = qH0iK5Z - (658 - 657);
                }
            }
            cb0TF3 = (847 - 285) - (1292 - 731);
            aVyCBM2HIv[WsRp3KkQai] = '\0';
            printf ("%s\n%s\n", Yjzu9HSUZ0K, aVyCBM2HIv);
            memset (Yjzu9HSUZ0K, '\0', sizeof (Yjzu9HSUZ0K));
            memset (aVyCBM2HIv, '\0', sizeof (aVyCBM2HIv));
        }
    }
    return (458 - 458);
}

