int main () {
    int Mmwh9q;
    int CtMbqfLFDJ;
    char bPMaUfDGBXki [(481 - 371)] = {'\0'};
    int IWtKyQDkeT [(323 - 213)] = {(677 - 677)};
    int f0k7AT3;
    int qRPLFmnjU75;
    int apEkxrN;
    int cWfKMn7;
    cWfKMn7 = (559 - 559);
    CtMbqfLFDJ = (612 - 612);
    for (; cin.getline (bPMaUfDGBXki, (897 - 787));) {
        f0k7AT3 = strlen (bPMaUfDGBXki);
        CtMbqfLFDJ = (714 - 714);
        {
            apEkxrN = (897 - 253) - (750 - 106);
            for (; (561 - 451) > apEkxrN;) {
                IWtKyQDkeT[apEkxrN] = (334 - 334);
                apEkxrN = (1556 - 598) - (1369 - 412);
            };
        }
        {
            apEkxrN = (898 - 303) - (1273 - 678);
            for (; apEkxrN < f0k7AT3;) {
                if (!('(' != bPMaUfDGBXki[apEkxrN]) || !(')' != bPMaUfDGBXki[apEkxrN])) {
                    if (!((549 - 549) != CtMbqfLFDJ)) {
                        if (!('(' != bPMaUfDGBXki[apEkxrN]))
                            IWtKyQDkeT[CtMbqfLFDJ]++;
                        else
                            IWtKyQDkeT[CtMbqfLFDJ]--;
                        CtMbqfLFDJ = CtMbqfLFDJ +(280 - 279);
                    }
                    else {
                        if (!('(' != bPMaUfDGBXki[apEkxrN]))
                            IWtKyQDkeT[CtMbqfLFDJ] = (500 - 499);
                        else {
                            if (!(')' != bPMaUfDGBXki[apEkxrN])) {
                                IWtKyQDkeT[CtMbqfLFDJ] = -(350 - 349);
                                {
                                    Mmwh9q = (359 - 36) - (463 - 141);
                                    for (; Mmwh9q >= (943 - 943);) {
                                        if (!((820 - 819) != IWtKyQDkeT[Mmwh9q])) {
                                            IWtKyQDkeT[Mmwh9q] = (825 - 825);
                                            IWtKyQDkeT[CtMbqfLFDJ] = (695 - 695);
                                            break;
                                        }
                                        Mmwh9q = (578 - 46) - (1381 - 850);
                                    };
                                };
                            }
                            else
                                ;
                        }
                        qRPLFmnjU75 = (927 - 927);
                        CtMbqfLFDJ = CtMbqfLFDJ +(904 - 903);
                    };
                }
                apEkxrN = (674 - 420) - (1223 - 970);
            };
        }
        cWfKMn7 = (376 - 376);
        cout << bPMaUfDGBXki << endl;
        {
            apEkxrN = (1255 - 863) - (1321 - 929);
            for (; f0k7AT3 > apEkxrN;) {
                if (bPMaUfDGBXki[apEkxrN] != '(' && bPMaUfDGBXki[apEkxrN] != ')')
                    cout << ' ';
                else {
                    if (!((509 - 509) != IWtKyQDkeT[cWfKMn7]))
                        cout << ' ';
                    else {
                        if ((221 - 221) < IWtKyQDkeT[cWfKMn7])
                            cout << '$';
                        else
                            cout << '?';
                    }
                    cWfKMn7 = cWfKMn7 + (706 - 705);
                }
                apEkxrN = (737 - 158) - (839 - 261);
            };
        }
        cout << endl;
    }
    return (834 - 834);
}

