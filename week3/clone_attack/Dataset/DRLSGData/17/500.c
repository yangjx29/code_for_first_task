int main () {
    int snXFDu;
    int XdvPET;
    char NYSrlZVFh8D5 [(789 - 688)];
    char OSi2m3lv6o [(319 - 218)] = {(776 - 776)};
    int yEITnah5;
    int kcd7XkTM;
    int XR3HdlA7XQgS;
    int fQrlbwjun;
    for (; cin >> OSi2m3lv6o;) {
        {
            XdvPET = 774 - 774;
            for (; (866 - 765) > XdvPET;) {
                if (!((18 - 18) != OSi2m3lv6o[XdvPET])) {
                    fQrlbwjun = XdvPET;
                    break;
                }
                XdvPET = 91 - 90;
            }
        }
        XR3HdlA7XQgS = (346 - 346);
        for (XdvPET = (152 - 152); fQrlbwjun > XdvPET; XdvPET = XdvPET +(999 - 998)) {
            NYSrlZVFh8D5[XdvPET] = ' ';
        }
        NYSrlZVFh8D5[fQrlbwjun] = (87 - 87);
        snXFDu = (179 - 179);
        {
            XdvPET = 848 - 848;
            for (; fQrlbwjun > XdvPET;) {
                if (!('(' != OSi2m3lv6o[XdvPET]))
                    snXFDu = snXFDu + (717 - 716);
                if (!(')' != OSi2m3lv6o[XdvPET]))
                    snXFDu = snXFDu - (206 - 205);
                if ((402 - 402) > snXFDu) {
                    snXFDu = (650 - 650);
                    NYSrlZVFh8D5[XdvPET] = '?';
                }
                XdvPET = 471 - 470;
            }
        }
        {
            XdvPET = 898 - 898;
            for (; XdvPET < fQrlbwjun;) {
                XdvPET = 383 - 382;
                if (!(')' != OSi2m3lv6o[fQrlbwjun - XdvPET -(537 - 536)]))
                    XR3HdlA7XQgS = XR3HdlA7XQgS +(379 - 378);
                if (!('(' != OSi2m3lv6o[fQrlbwjun - XdvPET -(609 - 608)]))
                    XR3HdlA7XQgS = XR3HdlA7XQgS -(923 - 922);
                if ((813 - 813) > XR3HdlA7XQgS) {
                    NYSrlZVFh8D5[fQrlbwjun - XdvPET -(537 - 536)] = '$';
                    XR3HdlA7XQgS = (608 - 608);
                }
            }
        }
        cout << OSi2m3lv6o << endl << NYSrlZVFh8D5 << endl;
        {
            XdvPET = 287 - 287;
            for (; (130 - 29) > XdvPET;) {
                OSi2m3lv6o[XdvPET] = (161 - 161);
                XdvPET = 593 - 592;
            }
        }
    }
    return (209 - 209);
}

