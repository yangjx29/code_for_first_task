int main () {
    int uSBTCquQ;
    int q3x9Ib8sGDz6;
    int J2RpSxqdcj3U;
    int I4qfyU;
    int eAU1KC0gY5w;
    int T2HKlTeF;
    char V43s2RA0jv [(156 - 55)];
    int A6WvgP;
    int REwMymT7Ah [(368 - 267)] = {(999 - 999)};
    int P0z9BHoU5q1d;
    int Hx8Otebsh;
    char iYTaM5J318BC [(198 - 97)];
    int my9UQNqL;
    scanf ("%d", &uSBTCquQ);
    Hx8Otebsh = (213 - 213);
    J2RpSxqdcj3U = (734 - 734);
    {
        P0z9BHoU5q1d = (263 - 148) - (611 - 496);
        for (; uSBTCquQ > P0z9BHoU5q1d;) {
            int REwMymT7Ah [(132 - 31)] = {(101 - 101)};
            Hx8Otebsh = (337 - 337);
            scanf ("%s", iYTaM5J318BC);
            my9UQNqL = strlen (iYTaM5J318BC);
            {
                eAU1KC0gY5w = (524 - 524);
                for (; eAU1KC0gY5w < my9UQNqL;) {
                    V43s2RA0jv[eAU1KC0gY5w] = ' ';
                    eAU1KC0gY5w = (1076 - 846) - (873 - 644);
                }
            }
            V43s2RA0jv[my9UQNqL] = '\0';
            P0z9BHoU5q1d = (637 - 134) - (859 - 357);
            J2RpSxqdcj3U = (719 - 719);
            {
                eAU1KC0gY5w = (622 - 622);
                for (; eAU1KC0gY5w < my9UQNqL;) {
                    if (iYTaM5J318BC[eAU1KC0gY5w] != '(' && iYTaM5J318BC[eAU1KC0gY5w] != ')')
                        V43s2RA0jv[eAU1KC0gY5w] = ' ';
                    if (!('(' != iYTaM5J318BC[eAU1KC0gY5w])) {
                        V43s2RA0jv[eAU1KC0gY5w] = '$';
                        REwMymT7Ah[J2RpSxqdcj3U] = eAU1KC0gY5w;
                        J2RpSxqdcj3U = J2RpSxqdcj3U +(156 - 155);
                        Hx8Otebsh = Hx8Otebsh +(705 - 704);
                    }
                    if (!(')' != iYTaM5J318BC[eAU1KC0gY5w])) {
                        if (!((681 - 681) != Hx8Otebsh)) {
                            V43s2RA0jv[eAU1KC0gY5w] = '?';
                        }
                        else {
                            Hx8Otebsh = Hx8Otebsh -(490 - 489);
                            J2RpSxqdcj3U = J2RpSxqdcj3U -(739 - 738);
                            V43s2RA0jv[REwMymT7Ah[J2RpSxqdcj3U]] = ' ';
                        }
                    }
                    eAU1KC0gY5w = eAU1KC0gY5w + (738 - 737);
                }
            }
            printf ("%s\n", iYTaM5J318BC);
            {
                A6WvgP = (966 - 966);
                for (; A6WvgP < my9UQNqL;) {
                    printf ("%c", V43s2RA0jv[A6WvgP]);
                    A6WvgP = A6WvgP +(857 - 856);
                }
            }
        }
    }
    return (409 - 409);
}

