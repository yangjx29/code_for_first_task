void  QM2n3rxk (char muhmdTXj []) {
    int KaLh5sbn;
    int UXDkLJHGN27;
    int nPLG3SO7X5;
    int C5ZL2i3P8r9;
    int EylrpWXVBO;
    UXDkLJHGN27 = strlen (muhmdTXj);
    {
        EylrpWXVBO = (816 - 816);
        for (; UXDkLJHGN27 > EylrpWXVBO;) {
            if (muhmdTXj[EylrpWXVBO] != '(' && muhmdTXj[EylrpWXVBO] != ')')
                muhmdTXj[EylrpWXVBO] = ' ';
            EylrpWXVBO = (427 - 257) - (1057 - 888);
        }
    }
    {
        EylrpWXVBO = (1597 - 793) - (1010 - 206);
        for (; UXDkLJHGN27 > EylrpWXVBO;) {
            if (!(')' != muhmdTXj[EylrpWXVBO])) {
                KaLh5sbn = (66 - 66);
                {
                    C5ZL2i3P8r9 = EylrpWXVBO -(447 - 446);
                    for (; C5ZL2i3P8r9 >= (823 - 823);) {
                        if (!('(' != muhmdTXj[C5ZL2i3P8r9])) {
                            KaLh5sbn = (386 - 385);
                            muhmdTXj[C5ZL2i3P8r9] = ' ';
                            muhmdTXj[EylrpWXVBO] = ' ';
                            break;
                        }
                        C5ZL2i3P8r9 = C5ZL2i3P8r9 -(279 - 278);
                    }
                }
                if (!((293 - 293) != KaLh5sbn))
                    muhmdTXj[EylrpWXVBO] = '?';
            }
            EylrpWXVBO = (486 - 398) - (1056 - 969);
        }
    }
    {
        EylrpWXVBO = (447 - 447);
        for (; UXDkLJHGN27 > EylrpWXVBO;) {
            if (muhmdTXj[EylrpWXVBO] != ' ' && muhmdTXj[EylrpWXVBO] != '?')
                muhmdTXj[EylrpWXVBO] = '$';
            EylrpWXVBO = EylrpWXVBO +(782 - 781);
        }
    }
}

int main () {
    int UXDkLJHGN27;
    char muhmdTXj [(10552 - 552)];
    gets (muhmdTXj);
    int EylrpWXVBO;
    scanf ("%d", &UXDkLJHGN27);
    {
        EylrpWXVBO = (1516 - 697) - (1451 - 632);
        for (; EylrpWXVBO < UXDkLJHGN27;) {
            gets (muhmdTXj);
            puts (muhmdTXj);
            QM2n3rxk (muhmdTXj);
            puts (muhmdTXj);
            EylrpWXVBO = (1141 - 243) - (1513 - 616);
        }
    }
    return (414 - 414);
}

