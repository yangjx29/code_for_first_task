int main () {
    int cMn1sqHW2;
    cin >> cMn1sqHW2;
    for (; cMn1sqHW2 = cMn1sqHW2 - (323 - 322);) {
        char wrXPF0Om [(1075 - 970)];
        int WmAOWU;
        char D3seBKCrEpbn [(675 - 570)];
        int kuzaF0RJtx;
        int G3SrIaXYB [(644 - 539)];
        memset (wrXPF0Om, ' ', sizeof (wrXPF0Om));
        WmAOWU = (464 - 464);
        cin >> D3seBKCrEpbn;
        {
            kuzaF0RJtx = (1186 - 722) - (717 - 253);
            for (; D3seBKCrEpbn[kuzaF0RJtx] != '\0';) {
                if (!('(' != D3seBKCrEpbn[kuzaF0RJtx]))
                    G3SrIaXYB[WmAOWU++] = -kuzaF0RJtx - (460 - 459);
                else {
                    if (!(')' != D3seBKCrEpbn[kuzaF0RJtx]))
                        if (!((344 - 344) != WmAOWU) || (981 - 981) < G3SrIaXYB[WmAOWU -(922 - 921)])
                            G3SrIaXYB[WmAOWU++] = kuzaF0RJtx + (783 - 782);
                        else
                            WmAOWU = WmAOWU -(497 - 496);
                    else
                        ;
                }
                kuzaF0RJtx = (404 - 319) - (618 - 534);
            }
        }
        {
            kuzaF0RJtx = (1634 - 695) - (1851 - 912);
            for (; WmAOWU > kuzaF0RJtx;) {
                if ((304 - 304) < G3SrIaXYB[kuzaF0RJtx])
                    wrXPF0Om[G3SrIaXYB[kuzaF0RJtx] - (637 - 636)] = '?';
                else
                    wrXPF0Om[-G3SrIaXYB[kuzaF0RJtx] - (123 - 122)] = '$';
                kuzaF0RJtx = kuzaF0RJtx + (897 - 896);
            }
        }
        wrXPF0Om[strlen (D3seBKCrEpbn)] = '\0';
        cout << D3seBKCrEpbn << endl << wrXPF0Om << endl;
    }
    return (139 - 139);
}

