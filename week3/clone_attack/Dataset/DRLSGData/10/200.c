int main () {
    int W4rFaI5KBJ [(550 - 525)];
    int RLZ7b4mV [(131 - 106)], XE2xtFuXf;
    int xY3swx;
    int mhe0BEAO95F;
    int rTaXoErQP;
    scanf ("%d", &xY3swx);
    {
        rTaXoErQP = (861 - 861);
        while (xY3swx > rTaXoErQP) {
            scanf ("%d", &W4rFaI5KBJ[rTaXoErQP]);
            rTaXoErQP = (1386 - 778) - (889 - 282);
        }
    }
    RLZ7b4mV[xY3swx - (71 - 70)] = (544 - 543);
    if (W4rFaI5KBJ[xY3swx - (89 - 87)] >= W4rFaI5KBJ[xY3swx - (332 - 331)])
        RLZ7b4mV[xY3swx - (271 - 269)] = (814 - 812);
    else
        RLZ7b4mV[xY3swx - (913 - 911)] = (718 - 717);
    {
        XE2xtFuXf = xY3swx - (596 - 593);
        for (; (500 - 500) <= XE2xtFuXf;) {
            mhe0BEAO95F = (571 - 571);
            {
                rTaXoErQP = XE2xtFuXf +(434 - 433);
                for (; xY3swx - (683 - 682) >= rTaXoErQP;) {
                    if (W4rFaI5KBJ[XE2xtFuXf] >= W4rFaI5KBJ[rTaXoErQP] && RLZ7b4mV[rTaXoErQP] >= mhe0BEAO95F)
                        mhe0BEAO95F = RLZ7b4mV[rTaXoErQP];
                    rTaXoErQP++;
                }
            }
            RLZ7b4mV[XE2xtFuXf] = mhe0BEAO95F + (744 - 743);
            XE2xtFuXf = (900 - 271) - (843 - 215);
        }
    }
    mhe0BEAO95F = (529 - 529);
    {
        XE2xtFuXf = (201 - 201);
        while (XE2xtFuXf <= xY3swx - 1) {
            if (RLZ7b4mV[XE2xtFuXf] > mhe0BEAO95F)
                mhe0BEAO95F = RLZ7b4mV[XE2xtFuXf];
            XE2xtFuXf++;
        }
    }
    printf ("%d\n", mhe0BEAO95F);
    return 0;
}

