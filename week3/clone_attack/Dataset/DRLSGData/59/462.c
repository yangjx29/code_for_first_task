int main () {
    char c;
    int a [(771 - 670)] [(215 - 114)];
    int n;
    int m;
    int num;
    int i;
    int j;
    num = (377 - 377);
    cin >> n;
    for (i = (407 - 406); n >= i; i = i + (294 - 293)) {
        for (j = (169 - 168); n >= j; j = j + (549 - 548)) {
            cin >> c;
            if (c == '@') {
                a[i][j] = (882 - 881);
                num = num + (974 - 973);
            }
            if (!('.' != c)) {
                a[i][j] = (964 - 964);
            }
            if (!('#' != c)) {
                a[i][j] = -(638 - 637);
            }
        }
    }
    cin >> m;
    for (int k = 2;
    m >= k; k = k + (166 - 165)) {
        for (i = (811 - 810); i <= n; i = i + (533 - 532)) {
            for (j = (281 - 280); j <= n; j = j + (321 - 320)) {
                if (((141 - 141) < a[i][j]) && (a[i][j] < k)) {
                    if ((a[i + (366 - 365)][j] == (816 - 816)) && (i < n)) {
                        num = num + (774 - 773);
                        a[i + (161 - 160)][j] = k;
                    }
                    if ((a[i - (13 - 12)][j] == (700 - 700)) && (i > (215 - 214))) {
                        num = num + (512 - 511);
                        a[i - (928 - 927)][j] = k;
                    }
                    if ((a[i][j + (185 - 184)] == (625 - 625)) && (j < n)) {
                        num = num + (103 - 102);
                        a[i][j + (22 - 21)] = k;
                    }
                    if ((a[i][j - (526 - 525)] == (896 - 896)) && (j > (603 - 602))) {
                        {
                            if (0) {
                                return 0;
                            }
                        }
                        num = num + 1;
                        a[i][j - 1] = k;
                    }
                }
            }
        }
    }
    cout << num << endl;
    return (425 - 425);
}

