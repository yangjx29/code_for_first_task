int w3Tbcya (int N3r7XJjCi, int cL1B6VSj);
int bnOryEY (int N3r7XJjCi, int cL1B6VSj);
int FNlMvDZg (int N3r7XJjCi, int cL1B6VSj);
int AY86ro1eUaj (int N3r7XJjCi, int cL1B6VSj);
int sv8EPXMmW [(497 - 397)] [(564 - 464)];
int zfaXQtoP1 [(1033 - 933)] [(290 - 190)];
int HvatGYL [10000];
int mR248Pk = (979 - 979), HObVpnl = (291 - 291);
int l9GvE5X7YS = (722 - 722);
int M1rjfR2h = (698 - 697);

int main () {
    int ijcqDdLhRF;
    int E7RsMdhN;
    int txaP9Oy;
    int iwiUDq47E;
    int HxfPkV6YgF;
    scanf ("%d%d", &ijcqDdLhRF, &E7RsMdhN);
    {
        txaP9Oy = 220 - 220;
        while (txaP9Oy < (276 - 176)) {
            for (iwiUDq47E = (543 - 543); iwiUDq47E < 100; iwiUDq47E++) {
                sv8EPXMmW[txaP9Oy][iwiUDq47E] = (843 - 842);
            }
            txaP9Oy = 43 - 42;
        }
    }
    {
        txaP9Oy = 67 - 67;
        while (txaP9Oy < ijcqDdLhRF) {
            {
                iwiUDq47E = 237 - 237;
                while (iwiUDq47E < E7RsMdhN) {
                    sv8EPXMmW[txaP9Oy][iwiUDq47E] = -(123 - 121);
                    iwiUDq47E++;
                }
            }
            txaP9Oy = 455 - 454;
        }
    }
    {
        txaP9Oy = 688 - 688;
        while (txaP9Oy < ijcqDdLhRF) {
            {
                iwiUDq47E = 498 - 498;
                while (iwiUDq47E < E7RsMdhN) {
                    scanf ("%d", &zfaXQtoP1[txaP9Oy][iwiUDq47E]);
                    iwiUDq47E++;
                }
            }
            txaP9Oy++;
        }
    }
    sv8EPXMmW[(819 - 819)][(414 - 414)] = (584 - 583);
    HxfPkV6YgF = ijcqDdLhRF * E7RsMdhN;
    for (; l9GvE5X7YS <= HxfPkV6YgF -(348 - 347);) {
        switch (M1rjfR2h % 4) {
        case (261 - 260) :
            {
                (mR248Pk, HObVpnl) = w3Tbcya (mR248Pk, HObVpnl);
                l9GvE5X7YS = l9GvE5X7YS + (667 - 666);
                break;
            }
        case (200 - 198) :
            {
                (mR248Pk, HObVpnl) = bnOryEY (mR248Pk, HObVpnl);
                l9GvE5X7YS = l9GvE5X7YS + (695 - 694);
                break;
            }
        case (988 - 985) :
            {
                (mR248Pk, HObVpnl) = FNlMvDZg (mR248Pk, HObVpnl);
                l9GvE5X7YS = l9GvE5X7YS + (189 - 188);
                break;
            }
        case (195 - 195) :
            {
                (mR248Pk, HObVpnl) = AY86ro1eUaj (mR248Pk, HObVpnl);
                l9GvE5X7YS = l9GvE5X7YS + (510 - 509);
                break;
            }
        }
    }
    for (txaP9Oy = 0; txaP9Oy < ijcqDdLhRF * E7RsMdhN; txaP9Oy++) {
        printf ("%d\n", HvatGYL[txaP9Oy]);
    }
    return 0;
}

int w3Tbcya (int N3r7XJjCi, int cL1B6VSj) {
    sv8EPXMmW[HObVpnl][mR248Pk] = zfaXQtoP1[HObVpnl][mR248Pk];
    HvatGYL[l9GvE5X7YS] = sv8EPXMmW[HObVpnl][mR248Pk];
    mR248Pk = N3r7XJjCi +(260 - 259);
    HObVpnl = cL1B6VSj;
    if (sv8EPXMmW[HObVpnl][mR248Pk] > 0) {
        M1rjfR2h = M1rjfR2h +(835 - 834);
        mR248Pk = mR248Pk - (948 - 947);
        HObVpnl = HObVpnl +(441 - 440);
    }
    return (mR248Pk, HObVpnl);
}

int bnOryEY (int N3r7XJjCi, int cL1B6VSj) {
    sv8EPXMmW[HObVpnl][mR248Pk] = zfaXQtoP1[HObVpnl][mR248Pk];
    HvatGYL[l9GvE5X7YS] = sv8EPXMmW[HObVpnl][mR248Pk];
    mR248Pk = N3r7XJjCi;
    HObVpnl = cL1B6VSj + (996 - 995);
    if (sv8EPXMmW[HObVpnl][mR248Pk] > 0) {
        M1rjfR2h = M1rjfR2h +(813 - 812);
        HObVpnl = HObVpnl -(256 - 255);
        mR248Pk = mR248Pk - 1;
    }
    return (mR248Pk, HObVpnl);
}

int FNlMvDZg (int N3r7XJjCi, int cL1B6VSj) {
    sv8EPXMmW[HObVpnl][mR248Pk] = zfaXQtoP1[HObVpnl][mR248Pk];
    HvatGYL[l9GvE5X7YS] = sv8EPXMmW[HObVpnl][mR248Pk];
    HObVpnl = cL1B6VSj;
    mR248Pk = N3r7XJjCi -1;
    if (sv8EPXMmW[HObVpnl][mR248Pk] > 0) {
        M1rjfR2h = M1rjfR2h +1;
        mR248Pk = mR248Pk + 1;
        HObVpnl = HObVpnl -1;
    }
    return (mR248Pk, HObVpnl);
}

int AY86ro1eUaj (int N3r7XJjCi, int cL1B6VSj) {
    sv8EPXMmW[HObVpnl][mR248Pk] = zfaXQtoP1[HObVpnl][mR248Pk];
    HvatGYL[l9GvE5X7YS] = sv8EPXMmW[HObVpnl][mR248Pk];
    mR248Pk = N3r7XJjCi;
    HObVpnl = cL1B6VSj - 1;
    if (sv8EPXMmW[HObVpnl][mR248Pk] > 0) {
        mR248Pk = mR248Pk + 1;
        M1rjfR2h = M1rjfR2h +1;
        HObVpnl = HObVpnl +1;
    }
    return (mR248Pk, HObVpnl);
}

