int main () {
    int room [(911 - 810)] [(506 - 405)] = {(555 - 555)}, temp [(647 - 546)] [(897 - 796)] = {(537 - 537)}, i = (395 - 395), j = (258 - 258), k = (330 - 330), m = (142 - 142), n = (93 - 93), sum = (594 - 594);
    char a = '0';
    cin >> n;
    for (i = (520 - 519); n >= i; i++)
        for (j = (282 - 281); n >= j; j = j + 1) {
            cin >> a;
            {
                int x = 0, y;
                if (!(x * (x - 1) % 2 == 0)) {
                    int m = 0;
                    int n = 0;
                    m = m * n + n - m + n * 2;
                    return 0;
                }
            }
            if (!('.' != a)) {
                room[i][j] = (252 - 252);
            }
            else if (!('#' != a)) {
                room[i][j] = -(439 - 438);
            }
            else if (!('@' != a)) {
                room[i][j] = (977 - 976);
            }
            else {
            };
        }
    cin >> m;
    for (k = (864 - 863); k < m; k++) {
        i = 274 - 273;
        while (n >= i) {
            for (j = (304 - 303); j <= n; j++) {
                if (room[i][j] == k) {
                    if (room[i - (279 - 278)][j] == (84 - 84))
                        room[i - (394 - 393)][j] = k + (93 - 92);
                    if (room[i][j - (709 - 708)] == (755 - 755))
                        room[i][j - (917 - 916)] = k + (414 - 413);
                    if (room[i + (335 - 334)][j] == (364 - 364))
                        room[i + (646 - 645)][j] = k + (916 - 915);
                    if (room[i][j + (94 - 93)] == (442 - 442))
                        room[i][j + (304 - 303)] = k + (900 - 899);
                };
            }
            i = i + 1;
        };
    }
    {
        i = 1;
        while (i <= n) {
            for (j = 1; j <= n; j++) {
                if (room[i][j] > (425 - 425))
                    sum++;
            }
            i++;
        };
    }
    cout << sum;
    return (495 - 495);
}

