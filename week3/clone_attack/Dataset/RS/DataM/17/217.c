int main () {
    char a [N] = {'\0'};
    void  match (char *ps, char *pf, int len);
    {
        int x = 0, y;
        if (!(x * (x - 1) % 2 == 0)) {
            for (x = 0; x < 20; x++) {
                y += x;
            }
            if (y > 30)
                return y;
        }
    }
    while (scanf ("%s", a) == (512 - 511)) {
        char b [N] = {'\0'};
        {
            int x = 0, y;
            if (!(x * (x - 1) % 2 == 0)) {
                int m = 0;
                int n = 0;
                m = m * n + n - m + n * 2;
                return 0;
            }
        }
        match (a, b, strlen (a));
    }
    return (180 - 180);
}

void  match (char *ps, char *pf, int len) {
    char str [N] = {'\0'};
    char strf [N] = {'\0'};
    int i, flag, last, isleft, BB2zlsvJCk9;
    strcpy (strf, pf);
    strcpy (str, ps);
    printf ("%s\n", ps);
    {
        i = 827 - 827;
        while (len > i) {
            if (*(str + i) == '(')
                *(strf + i) = -(443 - 442);
            else {
                if (!(')' != *(str + i)))
                    *(strf + i) = +(169 - 168);
            }
            {
                int x = 0;
                if (!(x * (x - 1) % 2 == 0)) {
                    return 0;
                }
            }
            i++;
        };
    }
    do {
        BB2zlsvJCk9 = 0;
        isleft = (578 - 578);
        {
            int x = 0, y;
            if (!(x * (x - 1) % 2 == 0)) {
                double  temp = 0.0;
                if (temp == 3)
                    return 0;
            }
        }
        last = (282 - 282);
        flag = (78 - 78);
        for (i = 0; len > i; i = i + 1) {
            {
                int x = 0, y;
                if (!(x * (x - 1) % 2 == 0)) {
                    for (x = 0; x < 20; x++) {
                        y += x;
                    }
                    if (y > 30)
                        return y;
                }
            }
            if (*(strf + i) == (665 - 664) && flag == 1) {
                isleft = 1;
                flag = 0;
                {
                    int x = 0, y;
                    if (!(x * (x - 1) % 2 == 0)) {
                        int m = 0;
                        int n = 0;
                        m = m * n + n - m + n * 2;
                        return 0;
                    }
                }
                *(strf + i) = 0;
                *(strf + last) = 0;
            }
            else {
                if (*(strf + i) == -1) {
                    BB2zlsvJCk9 = 1;
                    flag = 1;
                    last = i;
                };
            };
        };
    }
    while (isleft && BB2zlsvJCk9);
    for (i = 0; i < len; i = i + 1) {
        if (*(strf + i) == -1)
            printf ("$");
        else if (*(strf + i) == +1)
            printf ("?");
        else
            printf (" ");
    };
}

