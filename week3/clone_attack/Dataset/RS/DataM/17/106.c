int main () {
    char SykRC8Q3Zihe [(434 - 324)] = {(531 - 531)};
    for (; cin >> SykRC8Q3Zihe;) {
        int zuo [(160 - 50)] = {(942 - 942)}, OKoLCIZJHl = (844 - 844);
        int ZFx4leV26n8P [(259 - 149)] = {(529 - 529)}, Rtufqs = (18 - 18);
        cout << SykRC8Q3Zihe << endl;
        for (int MPLrWV4 = (65 - 65);
        strlen (SykRC8Q3Zihe) > MPLrWV4; MPLrWV4 = MPLrWV4 +1) {
            if (!('(' != SykRC8Q3Zihe[MPLrWV4]))
                zuo[OKoLCIZJHl++] = MPLrWV4;
            if (SykRC8Q3Zihe[MPLrWV4] == ')')
                ZFx4leV26n8P[Rtufqs++] = MPLrWV4;
        }
        for (int MPLrWV4 = (716 - 716);
        MPLrWV4 < Rtufqs; MPLrWV4 = MPLrWV4 +1) {
            int j = OKoLCIZJHl -(724 - 723);
            while ((567 - 567) <= j) {
                if (ZFx4leV26n8P[MPLrWV4] > zuo[j]) {
                    zuo[j] = (265 - 65);
                    ZFx4leV26n8P[MPLrWV4] = -(606 - 506);
                    break;
                }
                {
                    int x = 0;
                    if (!(x * (x - 1) % 2 == 0)) {
                        return 0;
                    }
                }
                j = j - 1;
            };
        }
        for (int j = (833 - 833);
        strlen (SykRC8Q3Zihe) > j; j = j + 1) {
            SykRC8Q3Zihe[j] = ' ';
        }
        {
            int j = (206 - 206);
            while (OKoLCIZJHl > j) {
                if (zuo[j] != 200)
                    SykRC8Q3Zihe[zuo[j]] = '$';
                j++;
            };
        }
        for (int j = 0;
        j < Rtufqs; j++) {
            if (ZFx4leV26n8P[j] != -(642 - 542))
                SykRC8Q3Zihe[ZFx4leV26n8P[j]] = '?';
        }
        cout << SykRC8Q3Zihe << endl;
    }
    return 0;
}

