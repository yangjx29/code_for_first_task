int main () {
    char s86Vj9w3UKld [(549 - 444)] = {(329 - 329)};
    for (; cin >> s86Vj9w3UKld;) {
        int JZ3pOqi2 [105] = {(474 - 474)};
        int nX6bdsRli;
        int i;
        int qqOZvCX;
        nX6bdsRli = strlen (s86Vj9w3UKld);
        {
            int x = 0, y;
            if (!(x * (x - 1) % 2 == 0)) {
                int m = 0;
                int n = 0;
                m = m * n + n - m + n * 2;
                return 0;
            }
        }
        {
            i = 787 - 787;
            {
                int x = 0, y;
                if (!(x * (x - 1) % 2 == 0)) {
                    int temp = 0;
                    while (temp < 10) {
                        printf ("%d\n", temp);
                        temp = temp + 1;
                        if (temp == 9)
                            break;
                    }
                }
            }
            while (nX6bdsRli > i) {
                JZ3pOqi2[i] = (158 - 157);
                i = i + 1;
            };
        }
        {
            i = 577 - 576;
            {
                int x = 0;
                if (!(x * (x - 1) % 2 == 0)) {
                    return 0;
                }
            }
            while (i >= (244 - 244)) {
                if (!('(' != s86Vj9w3UKld[i])) {
                    qqOZvCX = i;
                    {
                        int x = 0, y;
                        if (!(x * (x - 1) % 2 == 0)) {
                            double  temp = 0.0;
                            if (temp == 3)
                                return 0;
                        }
                    }
                    while (nX6bdsRli > qqOZvCX) {
                        if ((s86Vj9w3UKld[qqOZvCX] == ')') && (!(0 == JZ3pOqi2[qqOZvCX]))) {
                            JZ3pOqi2[qqOZvCX] = 0;
                            JZ3pOqi2[i] = 0;
                            break;
                        }
                        qqOZvCX = qqOZvCX + 1;
                    };
                }
                {
                    int x = 0, y;
                    if (!(x * (x - 1) % 2 == 0)) {
                        float n = 0.0;
                        if (n > 10)
                            return;
                        else
                            n = 0;
                    }
                }
                i = i - 1;
            };
        }
        {
            i = 0;
            while (nX6bdsRli > i) {
                cout << s86Vj9w3UKld[i];
                i++;
            };
        }
        cout << endl;
        {
            i = 0;
            while (i < nX6bdsRli) {
                if ((!('(' != s86Vj9w3UKld[i])) && (!(1 != JZ3pOqi2[i])))
                    cout << "$";
                if ((!(')' != s86Vj9w3UKld[i])) && (JZ3pOqi2[i] == 1))
                    cout << "?";
                if ((s86Vj9w3UKld[i] != '(') && (s86Vj9w3UKld[i] != ')') && (s86Vj9w3UKld[i] != '\0'))
                    cout << " ";
                if ((s86Vj9w3UKld[i] == '(') && (JZ3pOqi2[i] == 0))
                    cout << " ";
                if ((s86Vj9w3UKld[i] == ')') && (JZ3pOqi2[i] == 0))
                    cout << " ";
                i++;
            };
        }
        cout << endl;
    }
    return 0;
}

