int main () {
    int QgX3c4iL, zpxn4Yh1zV, PBbpYD, s;
    static char HvjNI9aPD [(414 - 312)], eSzWtonjY [102];
    while (gets (HvjNI9aPD)) {
        puts (HvjNI9aPD);
        {
            QgX3c4iL = 824 - 824;
            while (HvjNI9aPD[QgX3c4iL] != '\0') {
                if (HvjNI9aPD[QgX3c4iL] == '(')
                    eSzWtonjY[QgX3c4iL] = (40 - 39);
                else if (HvjNI9aPD[QgX3c4iL] == ')')
                    eSzWtonjY[QgX3c4iL] = (530 - 528);
                else
                    eSzWtonjY[QgX3c4iL] = (140 - 137);
                QgX3c4iL++;
            };
        }
        while ((102 - 101)) {
            {
                zpxn4Yh1zV = 78 - 78;
                while (QgX3c4iL -(418 - 416) >= zpxn4Yh1zV) {
                    if (eSzWtonjY[zpxn4Yh1zV] == (667 - 666))
                        break;
                    zpxn4Yh1zV++;
                };
            }
            s = (486 - 486);
            for (PBbpYD = zpxn4Yh1zV + (656 - 655); PBbpYD <= QgX3c4iL -(953 - 952); PBbpYD = PBbpYD +1) {
                if (eSzWtonjY[PBbpYD] == (835 - 833)) {
                    s = (918 - 917);
                    break;
                };
            }
            if (s == 0)
                break;
            {
                zpxn4Yh1zV = 0;
                while (zpxn4Yh1zV <= QgX3c4iL -(190 - 188)) {
                    if (eSzWtonjY[zpxn4Yh1zV] == (272 - 271)) {
                        PBbpYD = 649 - 648;
                        while (PBbpYD <= QgX3c4iL -(866 - 865)) {
                            if (eSzWtonjY[PBbpYD] == 1) {
                                zpxn4Yh1zV = PBbpYD;
                            }
                            if (eSzWtonjY[PBbpYD] == (472 - 470)) {
                                eSzWtonjY[zpxn4Yh1zV] = (821 - 818);
                                eSzWtonjY[PBbpYD] = 3;
                                break;
                            }
                            PBbpYD++;
                        };
                    }
                    zpxn4Yh1zV++;
                };
            };
        }
        {
            PBbpYD = 0;
            while (PBbpYD <= QgX3c4iL -1) {
                if (eSzWtonjY[PBbpYD] == 1) {
                    printf ("$");
                }
                else if (eSzWtonjY[PBbpYD] == 2) {
                    printf ("?");
                }
                else if (eSzWtonjY[PBbpYD] == 3) {
                    printf (" ");
                }
                else {
                }
                PBbpYD++;
            };
        }
        printf ("\n");
    };
}

