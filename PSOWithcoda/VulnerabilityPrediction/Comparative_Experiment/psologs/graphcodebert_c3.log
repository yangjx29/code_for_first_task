Some weights of RobertaForSequenceClassification were not initialized from the model checkpoint at microsoft/graphcodebert-base and are newly initialized: ['classifier.dense.bias', 'classifier.dense.weight', 'classifier.out_proj.bias', 'classifier.out_proj.weight']
You should probably TRAIN this model on a down-stream task to be able to use it for predictions and inference.
/data/yjx/code_for_first_task/PSOWithcoda/VulnerabilityPrediction/Comparative_Experiment/../code/run.py:141: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  self.examples = torch.load(cache_file_path)
/data/yjx/code_for_first_task/PSOWithcoda/VulnerabilityPrediction/Comparative_Experiment/test.py:110: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  model.load_state_dict(torch.load(output_dir))

 cached_features_file:  ../dataset/graphcodebert_cached_test_subs_gan_0_400
400 400
Processing examples:   0%|          | 0/400 [00:00<?, ?it/s]03/13/2025 11:15:15 - INFO - __main__ -   测试:0

03/13/2025 11:15:15 - INFO - __main__ -   Attack failed!

The original code is misclassified.
Query times in this attack:  1
All Query times:  1
Processing examples:   0%|          | 1/400 [00:00<01:21,  4.91it/s]03/13/2025 11:15:15 - INFO - __main__ -   测试:1

03/13/2025 11:15:15 - INFO - __main__ -   Attack failed!

03/13/2025 11:15:15 - INFO - __main__ -   测试:2

03/13/2025 11:15:15 - INFO - __main__ -   Attack failed!

03/13/2025 11:15:15 - INFO - __main__ -   测试:3

03/13/2025 11:15:15 - INFO - __main__ -   Attack failed!

The original code is misclassified.
Query times in this attack:  1
All Query times:  2
The original code is misclassified.
Query times in this attack:  1
All Query times:  3
The original code is misclassified.
Query times in this attack:  1
All Query times:  4
Processing examples:   1%|          | 4/400 [00:00<00:35, 11.31it/s]03/13/2025 11:15:15 - INFO - __main__ -   测试:4

03/13/2025 11:15:15 - INFO - __main__ -   Attack failed!

03/13/2025 11:15:15 - INFO - __main__ -   测试:5

We strongly recommend passing in an `attention_mask` since your input_ids may be padded. See https://huggingface.co/docs/transformers/troubleshooting#incorrect-output-when-padding-tokens-arent-masked.
03/13/2025 11:15:19 - INFO - __main__ -   Success rate: 100.00%

03/13/2025 11:15:19 - INFO - __main__ -   Successful items count: 1

03/13/2025 11:15:19 - INFO - __main__ -   Total count: 1

03/13/2025 11:15:19 - INFO - __main__ -   Index: 5

The original code is misclassified.
Query times in this attack:  1
All Query times:  5
Number of variable_names extracted:  1
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  4
All Query times:  9
Processing examples:   2%|▏         | 6/400 [00:03<05:16,  1.24it/s]03/13/2025 11:15:19 - INFO - __main__ -   测试:6

03/13/2025 11:15:19 - INFO - __main__ -   Attack failed!

03/13/2025 11:15:19 - INFO - __main__ -   测试:7

03/13/2025 11:15:19 - INFO - __main__ -   Attack failed!

03/13/2025 11:15:19 - INFO - __main__ -   测试:8

03/13/2025 11:15:40 - INFO - __main__ -   Success rate: 100.00%

03/13/2025 11:15:40 - INFO - __main__ -   Successful items count: 2

03/13/2025 11:15:40 - INFO - __main__ -   Total count: 2

03/13/2025 11:15:40 - INFO - __main__ -   Index: 8

The original code is misclassified.
Query times in this attack:  1
All Query times:  10
The original code is misclassified.
Query times in this attack:  1
All Query times:  11
Number of variable_names extracted:  9
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  18
All Query times:  29
Processing examples:   2%|▏         | 9/400 [00:25<25:03,  3.85s/it]03/13/2025 11:15:40 - INFO - __main__ -   测试:9

03/13/2025 11:15:46 - INFO - __main__ -   Success rate: 100.00%

03/13/2025 11:15:46 - INFO - __main__ -   Successful items count: 3

03/13/2025 11:15:46 - INFO - __main__ -   Total count: 3

03/13/2025 11:15:46 - INFO - __main__ -   Index: 9

Number of variable_names extracted:  5
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  6
All Query times:  35
Processing examples:   2%|▎         | 10/400 [00:30<27:01,  4.16s/it]03/13/2025 11:15:46 - INFO - __main__ -   测试:10

03/13/2025 11:15:46 - INFO - __main__ -   Attack failed!

03/13/2025 11:15:46 - INFO - __main__ -   测试:11

03/13/2025 11:15:46 - INFO - __main__ -   Attack failed!

03/13/2025 11:15:46 - INFO - __main__ -   测试:12

03/13/2025 11:15:47 - INFO - __main__ -   Success rate: 100.00%

03/13/2025 11:15:47 - INFO - __main__ -   Successful items count: 4

03/13/2025 11:15:47 - INFO - __main__ -   Total count: 4

03/13/2025 11:15:47 - INFO - __main__ -   Index: 12

The original code is misclassified.
Query times in this attack:  1
All Query times:  36
The original code is misclassified.
Query times in this attack:  1
All Query times:  37
Number of variable_names extracted:  2
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  2
All Query times:  39
Processing examples:   3%|▎         | 13/400 [00:31<15:55,  2.47s/it]03/13/2025 11:15:47 - INFO - __main__ -   测试:13

03/13/2025 11:15:57 - INFO - __main__ -   Success rate: 100.00%

03/13/2025 11:15:57 - INFO - __main__ -   Successful items count: 5

03/13/2025 11:15:57 - INFO - __main__ -   Total count: 5

03/13/2025 11:15:57 - INFO - __main__ -   Index: 13

Number of variable_names extracted:  1
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  7
All Query times:  46
Processing examples:   4%|▎         | 14/400 [00:41<24:13,  3.77s/it]03/13/2025 11:15:57 - INFO - __main__ -   测试:14

03/13/2025 11:15:57 - WARNING - root -   WARNING: There is no reference data-flows extracted from the whole corpus, and the data-flow match score degenerates to 0. Please consider ignoring this score.
03/13/2025 11:15:57 - INFO - __main__ -   Success rate: 100.00%

03/13/2025 11:15:57 - INFO - __main__ -   Successful items count: 6

03/13/2025 11:15:57 - INFO - __main__ -   Total count: 6

03/13/2025 11:15:57 - INFO - __main__ -   Index: 14

Number of variable_names extracted:  1
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  2
All Query times:  48
Processing examples:   4%|▍         | 15/400 [00:42<20:22,  3.18s/it]03/13/2025 11:15:57 - INFO - __main__ -   测试:15

03/13/2025 11:15:58 - INFO - __main__ -   Success rate: 100.00%

03/13/2025 11:15:58 - INFO - __main__ -   Successful items count: 7

03/13/2025 11:15:58 - INFO - __main__ -   Total count: 7

03/13/2025 11:15:58 - INFO - __main__ -   Index: 15

Number of variable_names extracted:  2
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  2
All Query times:  50
Processing examples:   4%|▍         | 16/400 [00:43<16:55,  2.64s/it]03/13/2025 11:15:58 - INFO - __main__ -   测试:16

03/13/2025 11:15:58 - INFO - __main__ -   Attack failed!

03/13/2025 11:15:58 - INFO - __main__ -   测试:17

03/13/2025 11:15:59 - INFO - __main__ -   Attack failed!

The original code is misclassified.
Query times in this attack:  1
All Query times:  51
The original code is misclassified.
Query times in this attack:  1
All Query times:  52
Processing examples:   4%|▍         | 18/400 [00:43<10:49,  1.70s/it]03/13/2025 11:15:59 - INFO - __main__ -   测试:18

03/13/2025 11:16:03 - INFO - __main__ -   Success rate: 100.00%

03/13/2025 11:16:03 - INFO - __main__ -   Successful items count: 8

03/13/2025 11:16:03 - INFO - __main__ -   Total count: 8

03/13/2025 11:16:03 - INFO - __main__ -   Index: 18

Number of variable_names extracted:  1
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  6
All Query times:  58
Processing examples:   5%|▍         | 19/400 [00:47<14:07,  2.22s/it]03/13/2025 11:16:03 - INFO - __main__ -   测试:19

03/13/2025 11:16:04 - INFO - __main__ -   Success rate: 100.00%

03/13/2025 11:16:04 - INFO - __main__ -   Successful items count: 9

03/13/2025 11:16:04 - INFO - __main__ -   Total count: 9

03/13/2025 11:16:04 - INFO - __main__ -   Index: 19

Number of variable_names extracted:  13
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  2
All Query times:  60
Processing examples:   5%|▌         | 20/400 [00:48<12:05,  1.91s/it]03/13/2025 11:16:04 - INFO - __main__ -   测试:20

03/13/2025 11:16:05 - INFO - __main__ -   Success rate: 100.00%

03/13/2025 11:16:05 - INFO - __main__ -   Successful items count: 10

03/13/2025 11:16:05 - INFO - __main__ -   Total count: 10

03/13/2025 11:16:05 - INFO - __main__ -   Index: 20

Number of variable_names extracted:  12
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  3
All Query times:  63
Processing examples:   5%|▌         | 21/400 [00:50<11:51,  1.88s/it]03/13/2025 11:16:05 - INFO - __main__ -   测试:21

03/13/2025 11:16:05 - INFO - __main__ -   Attack failed!

03/13/2025 11:16:05 - INFO - __main__ -   测试:22

03/13/2025 11:16:34 - INFO - __main__ -   Success rate: 90.91%

03/13/2025 11:16:34 - INFO - __main__ -   Successful items count: 10

03/13/2025 11:16:34 - INFO - __main__ -   Total count: 11

03/13/2025 11:16:34 - INFO - __main__ -   Index: 22

The original code is misclassified.
Query times in this attack:  1
All Query times:  64
Number of variable_names extracted:  7
Changing code structure...
Query times in this attack:  26
All Query times:  90
Processing examples:   6%|▌         | 23/400 [01:19<45:11,  7.19s/it]03/13/2025 11:16:34 - INFO - __main__ -   测试:23

03/13/2025 11:16:52 - INFO - __main__ -   Success rate: 83.33%

03/13/2025 11:16:52 - INFO - __main__ -   Successful items count: 10

03/13/2025 11:16:52 - INFO - __main__ -   Total count: 12

03/13/2025 11:16:52 - INFO - __main__ -   Index: 23

Number of variable_names extracted:  3
Changing code structure...
Query times in this attack:  26
All Query times:  116
Processing examples:   6%|▌         | 24/400 [01:37<1:00:27,  9.65s/it]03/13/2025 11:16:52 - INFO - __main__ -   测试:24

03/13/2025 11:17:14 - INFO - __main__ -   Success rate: 76.92%

03/13/2025 11:17:14 - INFO - __main__ -   Successful items count: 10

03/13/2025 11:17:14 - INFO - __main__ -   Total count: 13

03/13/2025 11:17:14 - INFO - __main__ -   Index: 24

Number of variable_names extracted:  8
Changing code structure...
Query times in this attack:  26
All Query times:  142
Processing examples:   6%|▋         | 25/400 [01:59<1:18:47, 12.61s/it]03/13/2025 11:17:14 - INFO - __main__ -   测试:25

03/13/2025 11:17:42 - INFO - __main__ -   Success rate: 71.43%

03/13/2025 11:17:42 - INFO - __main__ -   Successful items count: 10

03/13/2025 11:17:42 - INFO - __main__ -   Total count: 14

03/13/2025 11:17:42 - INFO - __main__ -   Index: 25

Number of variable_names extracted:  5
Changing code structure...
Query times in this attack:  26
All Query times:  168
Processing examples:   6%|▋         | 26/400 [02:27<1:43:50, 16.66s/it]03/13/2025 11:17:42 - INFO - __main__ -   测试:26

03/13/2025 11:17:42 - INFO - __main__ -   Attack failed!

03/13/2025 11:17:42 - INFO - __main__ -   测试:27

03/13/2025 11:17:42 - INFO - __main__ -   Attack failed!

03/13/2025 11:17:42 - INFO - __main__ -   测试:28

03/13/2025 11:17:52 - INFO - __main__ -   Success rate: 73.33%

03/13/2025 11:17:52 - INFO - __main__ -   Successful items count: 11

03/13/2025 11:17:52 - INFO - __main__ -   Total count: 15

03/13/2025 11:17:52 - INFO - __main__ -   Index: 28

The original code is misclassified.
Query times in this attack:  1
All Query times:  169
The original code is misclassified.
Query times in this attack:  1
All Query times:  170
Number of variable_names extracted:  6
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  11
All Query times:  181
Processing examples:   7%|▋         | 29/400 [02:36<59:01,  9.55s/it]  03/13/2025 11:17:52 - INFO - __main__ -   测试:29

03/13/2025 11:17:56 - INFO - __main__ -   Success rate: 75.00%

03/13/2025 11:17:56 - INFO - __main__ -   Successful items count: 12

03/13/2025 11:17:56 - INFO - __main__ -   Total count: 16

03/13/2025 11:17:56 - INFO - __main__ -   Index: 29

Number of variable_names extracted:  4
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  4
All Query times:  185
Processing examples:   8%|▊         | 30/400 [02:40<51:53,  8.42s/it]03/13/2025 11:17:56 - INFO - __main__ -   测试:30

03/13/2025 11:17:56 - INFO - __main__ -   Success rate: 76.47%

03/13/2025 11:17:56 - INFO - __main__ -   Successful items count: 13

03/13/2025 11:17:56 - INFO - __main__ -   Total count: 17

03/13/2025 11:17:56 - INFO - __main__ -   Index: 30

Number of variable_names extracted:  2
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  2
All Query times:  187
Processing examples:   8%|▊         | 31/400 [02:41<41:31,  6.75s/it]03/13/2025 11:17:56 - INFO - __main__ -   测试:31

03/13/2025 11:18:02 - INFO - __main__ -   Success rate: 77.78%

03/13/2025 11:18:02 - INFO - __main__ -   Successful items count: 14

03/13/2025 11:18:02 - INFO - __main__ -   Total count: 18

03/13/2025 11:18:02 - INFO - __main__ -   Index: 31

Number of variable_names extracted:  2
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  5
All Query times:  192
Processing examples:   8%|▊         | 32/400 [02:46<39:21,  6.42s/it]03/13/2025 11:18:02 - INFO - __main__ -   测试:32

03/13/2025 11:18:03 - INFO - __main__ -   Success rate: 78.95%

03/13/2025 11:18:03 - INFO - __main__ -   Successful items count: 15

03/13/2025 11:18:03 - INFO - __main__ -   Total count: 19

03/13/2025 11:18:03 - INFO - __main__ -   Index: 32

Number of variable_names extracted:  17
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  2
All Query times:  194
Processing examples:   8%|▊         | 33/400 [02:48<31:11,  5.10s/it]03/13/2025 11:18:03 - INFO - __main__ -   测试:33

03/13/2025 11:18:03 - INFO - __main__ -   Attack failed!

03/13/2025 11:18:03 - INFO - __main__ -   测试:34

03/13/2025 11:18:03 - INFO - __main__ -   Attack failed!

03/13/2025 11:18:03 - INFO - __main__ -   测试:35

03/13/2025 11:18:04 - INFO - __main__ -   Success rate: 80.00%

03/13/2025 11:18:04 - INFO - __main__ -   Successful items count: 16

03/13/2025 11:18:04 - INFO - __main__ -   Total count: 20

03/13/2025 11:18:04 - INFO - __main__ -   Index: 35

The original code is misclassified.
Query times in this attack:  1
All Query times:  195
The original code is misclassified.
Query times in this attack:  1
All Query times:  196
Number of variable_names extracted:  3
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  2
All Query times:  198
Processing examples:   9%|▉         | 36/400 [02:49<15:44,  2.60s/it]03/13/2025 11:18:04 - INFO - __main__ -   测试:36

03/13/2025 11:18:04 - INFO - __main__ -   Attack failed!

03/13/2025 11:18:04 - INFO - __main__ -   测试:37

03/13/2025 11:18:08 - INFO - __main__ -   Success rate: 80.95%

03/13/2025 11:18:08 - INFO - __main__ -   Successful items count: 17

03/13/2025 11:18:08 - INFO - __main__ -   Total count: 21

03/13/2025 11:18:08 - INFO - __main__ -   Index: 37

The original code is misclassified.
Query times in this attack:  1
All Query times:  199
Number of variable_names extracted:  3
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  5
All Query times:  204
Processing examples:  10%|▉         | 38/400 [02:53<14:31,  2.41s/it]03/13/2025 11:18:08 - INFO - __main__ -   测试:38

03/13/2025 11:18:09 - INFO - __main__ -   Success rate: 81.82%

03/13/2025 11:18:09 - INFO - __main__ -   Successful items count: 18

03/13/2025 11:18:09 - INFO - __main__ -   Total count: 22

03/13/2025 11:18:09 - INFO - __main__ -   Index: 38

Number of variable_names extracted:  2
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  2
All Query times:  206
Processing examples:  10%|▉         | 39/400 [02:54<12:47,  2.13s/it]03/13/2025 11:18:09 - INFO - __main__ -   测试:39

03/13/2025 11:18:13 - INFO - __main__ -   Success rate: 82.61%

03/13/2025 11:18:13 - INFO - __main__ -   Successful items count: 19

03/13/2025 11:18:13 - INFO - __main__ -   Total count: 23

03/13/2025 11:18:13 - INFO - __main__ -   Index: 39

Number of variable_names extracted:  9
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  4
All Query times:  210
Processing examples:  10%|█         | 40/400 [02:57<14:45,  2.46s/it]03/13/2025 11:18:13 - INFO - __main__ -   测试:40

03/13/2025 11:18:13 - INFO - __main__ -   Attack failed!

03/13/2025 11:18:13 - INFO - __main__ -   测试:41

03/13/2025 11:18:13 - INFO - __main__ -   Attack failed!

03/13/2025 11:18:13 - INFO - __main__ -   测试:42

03/13/2025 11:18:13 - INFO - __main__ -   Attack failed!

03/13/2025 11:18:13 - INFO - __main__ -   测试:43

03/13/2025 11:18:29 - INFO - __main__ -   Success rate: 83.33%

03/13/2025 11:18:29 - INFO - __main__ -   Successful items count: 20

03/13/2025 11:18:29 - INFO - __main__ -   Total count: 24

03/13/2025 11:18:29 - INFO - __main__ -   Index: 43

The original code is misclassified.
Query times in this attack:  1
All Query times:  211
The original code is misclassified.
Query times in this attack:  1
All Query times:  212
The original code is misclassified.
Query times in this attack:  1
All Query times:  213
Number of variable_names extracted:  30
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  15
All Query times:  228
Processing examples:  11%|█         | 44/400 [03:14<19:57,  3.36s/it]03/13/2025 11:18:29 - INFO - __main__ -   测试:44

03/13/2025 11:18:33 - INFO - __main__ -   Success rate: 84.00%

03/13/2025 11:18:33 - INFO - __main__ -   Successful items count: 21

03/13/2025 11:18:33 - INFO - __main__ -   Total count: 25

03/13/2025 11:18:33 - INFO - __main__ -   Index: 44

Number of variable_names extracted:  3
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  5
All Query times:  233
Processing examples:  11%|█▏        | 45/400 [03:17<20:14,  3.42s/it]03/13/2025 11:18:33 - INFO - __main__ -   测试:45

03/13/2025 11:18:34 - INFO - __main__ -   Success rate: 84.62%

03/13/2025 11:18:34 - INFO - __main__ -   Successful items count: 22

03/13/2025 11:18:34 - INFO - __main__ -   Total count: 26

03/13/2025 11:18:34 - INFO - __main__ -   Index: 45

Number of variable_names extracted:  19
Changing code structure...
changeCodeStructure SUCCESS!
Query times in this attack:  2
All Query times:  235
Processing examples:  12%|█▏        | 46/400 [03:19<17:38,  2.99s/it]03/13/2025 11:18:34 - INFO - __main__ -   测试:46

03/13/2025 11:18:34 - INFO - __main__ -   Attack failed!

03/13/2025 11:18:34 - INFO - __main__ -   测试:47

The original code is misclassified.
Query times in this attack:  1
All Query times:  236
Number of variable_names extracted:  2
Changing code structure...
Processing examples:  12%|█▏        | 47/400 [03:22<25:18,  4.30s/it]
Traceback (most recent call last):
  File "/data/yjx/code_for_first_task/PSOWithcoda/VulnerabilityPrediction/Comparative_Experiment/test.py", line 219, in <module>
    main()
  File "/data/yjx/code_for_first_task/PSOWithcoda/VulnerabilityPrediction/Comparative_Experiment/test.py", line 165, in main
    is_success, final_code, min_gap_prob, query, diver= attacker.attack(
  File "/data/yjx/code_for_first_task/PSOWithcoda/VulnerabilityPrediction/Comparative_Experiment/pso.py", line 829, in attack
    #     adv_code,now_iter = changeCodeStructure(all_elite_code, self.tokenizer_mlm, self.codebert_mlm,self.args,now_iter)
  File "/data/yjx/code_for_first_task/PSOWithcoda/VulnerabilityPrediction/Comparative_Experiment/pso.py", line 168, in changeCodeStructure
    action = GenRandomChange.getAction()
  File "/data/yjx/code_for_first_task/PSOWithcoda/VulnerabilityPrediction/Comparative_Experiment/../code/Transform/GenRandomChange.py", line 103, in getAction
    return gen_random_data(filepath,files,)
  File "/data/yjx/code_for_first_task/PSOWithcoda/VulnerabilityPrediction/Comparative_Experiment/../code/Transform/GenRandomChange.py", line 44, in gen_random_data
    count=int(fileHandle.readline().strip())
ValueError: invalid literal for int() with base 10: ''
